/*! For license information please see main.a723d869.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),x=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case S:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Ce=null;function Se(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Te(e){Ee?Ce?Ce.push(e):Ce=[e]:Ee=e}function xe(){if(Ee){var e=Ee,t=Ce;if(Ce=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var De=!1;function Re(e,t,n){if(De)return e(t,n);De=!0;try{return Ie(e,t,n)}finally{De=!1,(null!==Ee||null!==Ce)&&(Ne(),xe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Pe=!1}function Oe(e,t,n,r,i,a,o,u,s){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Oe.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Et,Ct,St,Tt=!1,xt=[],It=null,Nt=null,Dt=null,Rt=new Map,At=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Dt&&Ut(Dt)&&(Dt=null),Rt.forEach(Vt),At.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Dt&&zt(Dt,e),Rt.forEach(t),At.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Bt=_.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=F({},ln,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return Cn}var Tn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=an(Tn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Rn),Pn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Mn=c&&"TextEvent"in window&&!On,Fn=c&&(!Ln||On&&8<On&&11>=On),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Cr={};function Sr(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Er[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Sr("animationend"),xr=Sr("animationiteration"),Ir=Sr("animationstart"),Nr=Sr("transitionend"),Dr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Dr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Lr=Rr[Pr];Ar(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Ar(Tr,"onAnimationEnd"),Ar(xr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,l=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,l),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,l=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,l),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=xn;break;case"focusin":l="focus",s=yn;break;case"focusout":l="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case xr:case Ir:s=mn;break;case Nr:s=Dn;break;case"scroll":s=fn;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==u?u+"Capture":null:u;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&c.push(Wr(p,v,d)))),h)break;p=p.return}0<c.length&&(u=new s(u,l,null,n,i),o.push({event:u,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(s=null,l=r),s!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:_i(s),d=null==l?u:_i(l),(u=new c(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,s&&l)e:{for(f=l,p=0,d=c=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)c=Gr(c),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Gr(c),f=Gr(f)}c=null}else c=null;null!==s&&Qr(o,u,s,c,!1),null!==l&&null!==h&&Qr(o,h,l,c,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Hn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Ln)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Ln&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,l=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==l&&(u=l,i?null!=(s=Ae(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Ae(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],Ei=-1;function Ci(e){return{current:e}}function Si(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Ti(e,t){Ei++,wi[Ei]=e.current,e.current=t}var xi={},Ii=Ci(xi),Ni=Ci(!1),Di=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ii)}function Li(e,t,n){if(Ii.current!==xi)throw Error(a(168));Ti(Ii,t),Ti(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Di=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ii),Ti(Ii,e)):Si(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,ji=!1}}return null}var Bi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ci(null),ga=null,ka=null,_a=null;function ba(){_a=ka=ga=null}function wa(e){var t=ma.current;Si(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_u=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function xa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,xa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,l=s.next;s.next=null,null===o?a=l:o.next=l,o=s;var c=e.alternate;null!==c&&((u=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===u?c.firstBaseUpdate=l:u.next=l,c.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,c=l=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===c?(l=c=d,s=h):c=c.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(s=h),i.baseState=s,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rl(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rl(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,r))&&(rl(t,e,r,n),Oa(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=xi,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ai(t)?Di:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ai(t)?Di:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Vl(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var l=null,c=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m,h=y}if(v===u.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function y(i,u,s,l){var c=O(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var h=c=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?c=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),c;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,l))&&(u=o(g,u,y),null===h?c=g:h.sibling=g,h=g);return ia&&Ji(i,y),c}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),c}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===E){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===A&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ka(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((a=Ml(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Ol(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vl(o,r.mode,s)).return=r,r=a}return u(r);case A:return e(r,a,(c=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(O(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ul(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ci(Ja),eo=Ci(Ja),to=Ci(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ci(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,_o=0,bo=0;function wo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=lu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==_o;return _o=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function xo(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=f,u=r):l=l.next=f,vo.lanes|=h,Fs|=h}c=c.next}while(null!==c&&c!==o);null===l?u=r:l.next=s,ur(r,t.memoizedState)||(_u=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(_u=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Ao(e,t){var n=vo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,_u=!0),r=r.queue,Ho(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Oo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return xo().memoizedState}function zo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ko(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_u=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return xo().memoizedState}function tu(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rl(n,e,r,tl()),au(n,t,r)}}function nu(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,xa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(rl(n,e,r,i=tl()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ds.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(xo(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:eu,unstable_isNewReconciler:!1},lu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:Do,useRef:jo,useState:function(){return Do(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=xo();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Do(Io)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:eu,unstable_isNewReconciler:!1};function cu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),fu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=_.ReactCurrentOwner,_u=!1;function bu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function wu(e,t,n,r,i){n=n.render;var a=t.ref;return Ca(t,i),r=Co(e,t,n,r,a,i),n=So(),null===e||_u?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Ll(a,r)).ref=t.ref,e.return=t,t.child=e}function Cu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(_u=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(_u=!0)}}return xu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ls,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ls,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ls,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ls,Ps),Ps|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,r,i){var a=Ai(n)?Di:Ii.current;return a=Ri(t,a),Ca(t,i),n=Co(e,t,n,r,a,i),r=So(),null===e||_u?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(Ca(t,i),null===t.stateNode)Hu(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Sa(l):l=Ri(t,l=Ai(n)?Di:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&Ha(t,o,r,l),Da=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Da?("function"===typeof c&&(ja(t,n,c,r),s=t.memoizedState),(u=Da||qa(t,n,u,r,f,s,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=l,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),u=t.memoizedProps,l=t.type===t.elementType?u:ya(t.type,u),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Ai(n)?Di:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Ha(t,o,r,s),Da=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Da?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(l=Da||qa(t,n,l,r,f,p,s)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Au,Pu,Lu,Ou,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fl(s,i,0,null),e=Ml(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),_u||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rl(r,e,i,-1))}return yl(),ju(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ll(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Ll(r,u):(u=Ml(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Ll(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Ai(t.type)&&Pi(),Gu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ul(aa),aa=null))),Pu(e,t),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Lu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var l=o[s];"children"===s?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):u.hasOwnProperty(s)&&null!=l&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Au(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ye(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&k(e,o,c,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Ou(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(ul(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):yl())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),Pu(e,t),null===e&&qr(t.stateNode.containerInfo),Gu(t),null;case 10:return wa(t.type._context),Gu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Au=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Lu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(u.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(u.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Vr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var hs=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=hs,i=fs;hs=null,ds(e,t,n),fs=i,null!==(hs=r)&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:null!==hs&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(hs,n.stateNode));break;case 4:r=hs,i=fs,hs=n.stateNode.containerInfo,fs=!0,ds(e,t,n),hs=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sl(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:hs=s.stateNode,fs=!1;break e;case 3:case 4:hs=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===hs)throw Error(a(160));ps(o,u,i),hs=null,fs=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Sl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sl(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sl(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Sl(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var c=ke(s,o);for(u=0;u<l.length;u+=2){var h=l[u],f=l[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sl(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sl(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sl(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(c=Xu)||h,ys(t,e),Xu=c):ys(t,e),gs(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sl(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){ws(f);continue}}null!==p?(p.return=d,Zu=p):ws(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,s.style.display=ve("display",u))}catch(y){Sl(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Sl(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ls(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sl(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,_s(e,t,n)}function _s(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var l=Xu;if($u=o,(Xu=s)&&!l)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?Es(i):null!==s?(s.return=o,Zu=s):Es(i);for(;null!==a;)Zu=a,_s(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=l}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sl(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function ws(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function Es(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sl(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sl(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sl(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sl(t,o,s)}}}catch(s){Sl(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Cs,Ss=Math.ceil,Ts=_.ReactCurrentDispatcher,xs=_.ReactCurrentOwner,Is=_.ReactCurrentBatchConfig,Ns=0,Ds=null,Rs=null,As=0,Ps=0,Ls=Ci(0),Os=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,zs=null,qs=0,Bs=1/0,Hs=null,Ws=!1,Ks=null,Gs=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,el=0;function tl(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==As?As&-As:null!==va.transition?(0===el&&(el=vt()),el):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(Us|=n),4===Os&&sl(e,As)),il(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(Bs=Xe()+500,Vi&&qi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Ds?As:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Ns)&&qi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Zs=-1,el=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=ft(e,e===Ds?As:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Ns;Ns|=2;var o=vl();for(Ds===e&&As===t||(Hs=null,Bs=Xe()+500,dl(e,t));;)try{kl();break}catch(s){pl(e,s)}ba(),Ts.current=o,Ns=i,null!==Rs?t=0:(Ds=null,As=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Ms,dl(e,0),sl(e,r),il(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Ms,dl(e,0),sl(e,r),il(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,zs,Hs);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,zs,Hs),t);break}wl(e,zs,Hs);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,zs,Hs),r);break}wl(e,zs,Hs);break;default:throw Error(a(329))}}}return il(e,Xe()),e.callbackNode===n?al.bind(null,e):null}function ol(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=zs,zs=n,null!==t&&ul(t)),e}function ul(e){null===zs?zs=e:zs.push.apply(zs,e)}function sl(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ns))throw Error(a(327));El();var t=ft(e,0);if(0===(1&t))return il(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Ms,dl(e,0),sl(e,t),il(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,zs,Hs),il(e,Xe()),null}function cl(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(Bs=Xe()+500,Vi&&qi())}}function hl(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&El();var t=Ns;Ns|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Ns=t))&&qi()}}function fl(){Ps=Ls.current,Si(Ls)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:wa(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Ds=e,Rs=e=Ll(e.current,null),As=Ps=t,Os=0,Ms=null,Vs=Us=Fs=0,zs=js=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pl(e,t){for(;;){var n=Rs;try{if(ba(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,_o=0,xs.current=null,null===n||null===n.return){Os=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,l=t;if(t=As,s.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}if(0===(1&t)){yu(o,c,t),yl();break e}l=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(cu(l,s));break e}}o=l=cu(l,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,l,t));break e;case 1:s=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(_){t=_,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vl(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yl(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Us)||sl(Ds,As)}function ml(e,t){var n=Ns;Ns|=2;var r=vl();for(Ds===e&&As===t||(Hs=null,dl(e,t));;)try{gl();break}catch(i){pl(e,i)}if(ba(),Ns=n,Ts.current=r,null!==Rs)throw Error(a(261));return Ds=null,As=0,Os}function gl(){for(;null!==Rs;)_l(Rs)}function kl(){for(;null!==Rs&&!Ye();)_l(Rs)}function _l(e){var t=Cs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bl(e):Rs=t,xs.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(Rs=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Os=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Os&&(Os=5)}function wl(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{El()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(Rs=Ds=null,As=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dl(tt,(function(){return El(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,xs.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(l=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(s=u),d===o&&++h===r&&(l=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(b){Sl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Is.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&$s)&&0!==e.tag&&El(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,qi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function El(){if(null!==Ys){var e=_t($s),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Zu=c;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:rs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(os(h),h===c){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var _=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Zu=_;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(w){Sl(s,s.return,w)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Ns=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function Cl(e,t,n){e=La(e,t=pu(0,t=cu(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function Sl(e,t,n){if(3===e.tag)Cl(e,e,n);else for(;null!==t;){if(3===t.tag){Cl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=La(t,e=vu(t,e=cu(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(As&n)===n&&(4===Os||3===Os&&(130023424&As)===As&&500>Xe()-qs?dl(e,0):Vs|=n),il(e,t)}function xl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Na(e,t))&&(mt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),xl(e,n)}function Dl(e,t){return Ge(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Rl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pl(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Ml(n.children,i,o,t);case C:u=8,i|=8;break;case S:return(e=Al(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Al(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Al(19,n,t,i)).elementType=D,e.lanes=o,e;case P:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case x:u=9;break e;case I:u=11;break e;case R:u=14;break e;case A:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Al(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Al(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,a,o,u,s){return e=new jl(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Al(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function ql(e){if(!e)return xi;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Oi(e,n,t)}return t}function Bl(e,t,n,r,i,a,o,u,s){return(e=zl(n,r,!0,e,0,a,0,u,s)).context=ql(null),n=e.current,(a=Pa(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Hl(e,t,n,r){var i=t.current,a=tl(),o=nl(i);return n=ql(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(rl(e,i,o,a),Oa(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Cs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_u=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _u=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);_u=0!==(131072&e.flags)}else _u=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Ca(t,n),i=Co(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=xu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=wu(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=cu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=cu(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&la(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Pa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ea(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ea(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ca(t,n),r=r(i=Sa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Eu(e,t,r,i=ya(r.type,i),n);case 15:return Cu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Hu(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Ca(t,n),Ba(t,r,i),Wa(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wl(o);u.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wl(o);a.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wl(s);u.call(e)}}var s=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),hl((function(){Hl(t,s,n,r)})),s}(n,t,e,i,r);return Wl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Hl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),il(t,Xe()),0===(6&Ns)&&(Bs=Xe()+500,qi()))}break;case 13:hl((function(){var t=Na(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Gl(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rl(t,e,134217728,tl());Gl(e,134217728)}},Et=function(e){if(13===e.tag){var t=nl(e),n=Na(e,t);if(null!==n)rl(n,e,t,tl());Gl(e,t)}},Ct=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,Ne=hl;var tc={usingClientEntryPoint:!1,Events:[ki,_i,bi,Te,xe,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(hl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:u.current}}t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!C.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var l=0;l<e.length;l++){var c=a+I(u=e[l],l);s+=N(u,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,c=a+I(u,l++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)w.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],l=u+1,c=e[l];if(0>a(s,n))l<i&&0>a(c,s)?(e[r]=c,e[l]=n,r=l):(e[r]=s,e[u]=n,r=u);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function b(e){if(y=!1,_(e),!v)if(null!==r(l))v=!0,P(w);else{var t=r(c);null!==t&&L(b,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(_(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(l)&&i(l),_(n)}else i(l);f=r(l)}if(null!==f)var s=!0;else{var h=r(c);null!==h&&L(b,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,C=!1,S=null,T=-1,x=5,I=-1;function N(){return!(t.unstable_now()-I<x)}function D(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?E():(C=!1,S=null)}}else C=!1}if("function"===typeof k)E=function(){k(D)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=D,E=function(){A.postMessage(null)}}else E=function(){m(D,0)};function P(e){S=e,C||(C=!0,E())}function L(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(y?(g(T),T=-1):y=!0,L(b,a-o))):(e.sortIndex=u,n(l,e),v||p||(v=!0,P(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".32df3286.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="ma-soi-homemade:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/ma-soi-homemade/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkma_soi_homemade=self.webpackChunkma_soi_homemade||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n(250);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),u=new x(r||[]);return a(o,"_invoke",{value:E(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=h;var d={};function p(){}function v(){}function y(){}var m={};c(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(I([])));k&&k!==t&&n.call(k,u)&&(m=k);var _=y.prototype=p.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(a,o,u,s){var l=f(e[a],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==r(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(h).then((function(e){c.value=e,u(c)}),(function(e){return i("throw",e,u,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=C(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,a(_,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),c(_,l,"Generator"),c(_,u,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function a(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Lp){return void n(Lp)}u.done?t(s):Promise.resolve(s).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,s,"next",e)}function s(e){a(o,r,i,u,s,"throw",e)}u(void 0)}))}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return u}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function h(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=n.p+"static/media/home.c28491214b7790119764.jpeg";function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,n){return m=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},m.apply(null,arguments)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function k(){return k="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},k.apply(this,arguments)}function _(e){var t="function"===typeof Map?new Map:void 0;return _=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},_(e)}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){var t=y();return function(){var n,i=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,n)}}function S(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function I(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var N=!1,D=!1,R="${JSCORE_VERSION}",A=function(e,t){if(!e)throw P(t)},P=function(e){return new Error("Firebase Database ("+R+") INTERNAL ASSERT FAILED: "+e)},L=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(L(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new M;var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},M=function(e){w(n,e);var t=C(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return I(n)}(_(Error)),F=function(e){var t=L(e);return O.encodeByteArray(t,!0)},U=function(e){return F(e).replace(/\./g,"")},V=function(e){try{return O.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function j(e){return z(void 0,e)}function z(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=z(e[n],t[n]));return e}var q=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},B=function(){try{return q()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/ma-soi-homemade",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&V(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},H=function(e){var t=function(e){var t,n;return null===(n=null===(t=B())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},W=function(){var e;return null===(e=B())||void 0===e?void 0:e.config},K=function(){function e(){var t=this;T(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return I(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function G(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Q(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(G())}function Y(){return!0===N||!0===D}function $(){try{return"object"===typeof indexedDB}catch(e){return!1}}var X=function(e){w(n,e);var t=C(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(E(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(E(a),J.prototype.create),a}return I(n)}(_(Error)),J=function(){function e(t,n,r){T(this,e),this.service=t,this.serviceName=n,this.errors=r}return I(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new X(n,a,t)}}]),e}();var Z=/\{\$([^}]+)}/g;function ee(e){return JSON.parse(e)}function te(e){return JSON.stringify(e)}var ne=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ee(V(a[0])||""),n=ee(V(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ae(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function oe(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ue(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(se(u)&&se(s)){if(!ue(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function se(e){return null!==e&&"object"===typeof e}var le=function(){function e(){T(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return I(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^c&(h^f),s=1518500249):(u=c^h^f,s=1859775393):p<60?(u=c&h|f&(c|h),s=2400959708):(u=c^h^f,s=3395469782);var v=(l<<5|l>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ce(e,t){return"".concat(e," failed: ").concat(t," argument ")}var he=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function fe(e){return e&&e._delegate?e._delegate:e}var de=function(){function e(t,n,r){T(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return I(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),pe="[DEFAULT]",ve=function(){function e(t,n){T(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return I(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new K;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(s){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(S(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),S(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Lf){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===pe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Lf){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return this.component?this.component.multipleInstances?e:pe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ye,me,ge=function(){function e(t){T(this,e),this.name=t,this.providers=new Map}return I(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ve(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ke=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(me||(me={}));var _e={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},be=me.INFO,we=(h(ye={},me.DEBUG,"log"),h(ye,me.VERBOSE,"log"),h(ye,me.INFO,"info"),h(ye,me.WARN,"warn"),h(ye,me.ERROR,"error"),ye),Ee=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=we[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ce=function(){function e(t){T(this,e),this.name=t,this._logLevel=be,this._logHandler=Ee,this._userLogHandler=null,ke.push(this)}return I(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in me))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?_e[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.DEBUG].concat(t)),this._logHandler.apply(this,[this,me.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.VERBOSE].concat(t)),this._logHandler.apply(this,[this,me.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.INFO].concat(t)),this._logHandler.apply(this,[this,me.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.WARN].concat(t)),this._logHandler.apply(this,[this,me.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,me.ERROR].concat(t)),this._logHandler.apply(this,[this,me.ERROR].concat(t))}}]),e}();var Se,Te,xe=function(e,t){return t.some((function(t){return e instanceof t}))};var Ie=new WeakMap,Ne=new WeakMap,De=new WeakMap,Re=new WeakMap,Ae=new WeakMap;var Pe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||De.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Me(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Le(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Fe(this),n),Me(Ie.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Me(e.apply(Fe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Fe(this),t].concat(r));return De.set(a,t.sort?t.sort():[t]),Me(a)}}function Oe(e){return"function"===typeof e?Le(e):(e instanceof IDBTransaction&&function(e){if(!Ne.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ne.set(e,t)}}(e),xe(e,Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Pe):e)}function Me(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Me(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ie.set(t,e)})).catch((function(){})),Ae.set(t,e),t}(e);if(Re.has(e))return Re.get(e);var t=Oe(e);return t!==e&&(Re.set(e,t),Ae.set(t,e)),t}var Fe=function(e){return Ae.get(e)};var Ue,Ve,je=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],qe=new Map;function Be(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(qe.get(t))return qe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=ze.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||je.includes(n))){var u=function(){var e=o(i().mark((function e(t){var o,u,s,l,c,h,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,a?"readwrite":"readonly"),s=u.store,l=f.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=f[h];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,c),a&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return qe.set(t,u),u}}}Pe=function(e){return d(d({},e),{},{get:function(t,n,r){return Be(t,n)||e.get(t,n,r)},has:function(t,n){return!!Be(t,n)||e.has(t,n)}})}(Pe);var He=function(){function e(t){T(this,e),this.container=t}return I(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var We="@firebase/app",Ke="0.9.7",Ge=new Ce("@firebase/app"),Qe="[DEFAULT]",Ye=(h(Ue={},We,"fire-core"),h(Ue,"@firebase/app-compat","fire-core-compat"),h(Ue,"@firebase/analytics","fire-analytics"),h(Ue,"@firebase/analytics-compat","fire-analytics-compat"),h(Ue,"@firebase/app-check","fire-app-check"),h(Ue,"@firebase/app-check-compat","fire-app-check-compat"),h(Ue,"@firebase/auth","fire-auth"),h(Ue,"@firebase/auth-compat","fire-auth-compat"),h(Ue,"@firebase/database","fire-rtdb"),h(Ue,"@firebase/database-compat","fire-rtdb-compat"),h(Ue,"@firebase/functions","fire-fn"),h(Ue,"@firebase/functions-compat","fire-fn-compat"),h(Ue,"@firebase/installations","fire-iid"),h(Ue,"@firebase/installations-compat","fire-iid-compat"),h(Ue,"@firebase/messaging","fire-fcm"),h(Ue,"@firebase/messaging-compat","fire-fcm-compat"),h(Ue,"@firebase/performance","fire-perf"),h(Ue,"@firebase/performance-compat","fire-perf-compat"),h(Ue,"@firebase/remote-config","fire-rc"),h(Ue,"@firebase/remote-config-compat","fire-rc-compat"),h(Ue,"@firebase/storage","fire-gcs"),h(Ue,"@firebase/storage-compat","fire-gcs-compat"),h(Ue,"@firebase/firestore","fire-fst"),h(Ue,"@firebase/firestore-compat","fire-fst-compat"),h(Ue,"fire-js","fire-js"),h(Ue,"firebase","fire-js-all"),Ue),$e=new Map,Xe=new Map;function Je(e,t){try{e.container.addComponent(t)}catch(n){Ge.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ze(e){var t=e.name;if(Xe.has(t))return Ge.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);var n,r=b($e.values());try{for(r.s();!(n=r.n()).done;){Je(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function et(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var tt=(h(Ve={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Ve,"bad-app-name","Illegal App name: '{$appName}"),h(Ve,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(Ve,"app-deleted","Firebase App named '{$appName}' already deleted"),h(Ve,"no-options","Need to provide options, when not being deployed to hosting via source."),h(Ve,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(Ve,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(Ve,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(Ve,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(Ve,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(Ve,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ve),nt=new J("app","Firebase",tt),rt=function(){function e(t,n,r){var i=this;T(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new de("app",(function(){return i}),"PUBLIC"))}return I(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw nt.create("app-deleted",{appName:this._name})}}]),e}(),it="9.19.1";function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Qe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw nt.create("bad-app-name",{appName:String(i)});if(n||(n=W()),!n)throw nt.create("no-options");var a=$e.get(i);if(a){if(ue(n,a.options)&&ue(r,a.config))return a;throw nt.create("duplicate-app",{appName:i})}var o,u=new ge(i),s=b(Xe.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u.addComponent(l)}}catch(h){s.e(h)}finally{s.f()}var c=new rt(n,r,u);return $e.set(i,c),c}function ot(e,t,n){var r,i=null!==(r=Ye[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ge.warn(u.join(" "))}Ze(new de("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var ut="firebase-heartbeat-database",st=1,lt="firebase-heartbeat-store",ct=null;function ht(){return ct||(ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Me(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Me(u.result),e.oldVersion,e.newVersion,Me(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(ut,st,{upgrade:function(e,t){if(0===t)e.createObjectStore(lt)}}).catch((function(e){throw nt.create("idb-open",{originalErrorMessage:e.message})}))),ct}function ft(e){return dt.apply(this,arguments)}function dt(){return dt=o(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht();case 3:return n=e.sent,e.abrupt("return",n.transaction(lt).objectStore(lt).get(yt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof X?Ge.warn(e.t0.message):(r=nt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ge.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),dt.apply(this,arguments)}function pt(e,t){return vt.apply(this,arguments)}function vt(){return vt=o(i().mark((function e(t,n){var r,a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht();case 3:return r=e.sent,a=r.transaction(lt,"readwrite"),o=a.objectStore(lt),e.next=8,o.put(n,yt(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof X?Ge.warn(e.t0.message):(u=nt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ge.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),vt.apply(this,arguments)}function yt(e){return"".concat(e.name,"!").concat(e.options.appId)}var mt=function(){function e(t){var n=this;T(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new bt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return I(e,[{key:"triggerHeartbeat",value:function(){var e=o(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=gt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=o(i().mark((function e(){var t,n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=gt(),n=kt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,o=U(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gt(){return(new Date).toISOString().substring(0,10)}function kt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var _t,bt=function(){function e(t){T(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return I(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Lp){t(Lp)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ft(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=o(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=o(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(S(r.heartbeats),S(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function wt(e){return U(JSON.stringify({version:2,heartbeats:e})).length}_t="",Ze(new de("platform-logger",(function(e){return new He(e)}),"PRIVATE")),Ze(new de("heartbeat",(function(e){return new mt(e)}),"PRIVATE")),ot(We,Ke,_t),ot(We,Ke,"esm2017"),ot("fire-js","");var Et,Ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},St={},Tt=Tt||{},xt=Ct||self;function It(){}function Nt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Dt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Rt="closure_uid_"+(1e9*Math.random()>>>0),At=0;function Pt(e,t,n){return e.call.apply(e.bind,arguments)}function Lt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ot(e,t,n){return(Ot=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pt:Lt).apply(null,arguments)}function Mt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ft(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ut(){this.s=this.s,this.o=this.o}Ut.prototype.s=!1,Ut.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Rt)&&e[Rt]||(e[Rt]=++At))},Ut.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Vt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function jt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function zt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Nt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function qt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var Bt=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{xt.addEventListener("test",It,t),xt.removeEventListener("test",It,t)}catch(n){}return e}();function Ht(e){return/^[\s\xa0]*$/.test(e)}var Wt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Kt(e,t){return e<t?-1:e>t?1:0}function Gt(){var e=xt.navigator;return e&&(e=e.userAgent)?e:""}function Qt(e){return-1!=Gt().indexOf(e)}function Yt(e){return Yt[" "](e),e}Yt[" "]=It;var $t,Xt=Qt("Opera"),Jt=Qt("Trident")||Qt("MSIE"),Zt=Qt("Edge"),en=Zt||Jt,tn=Qt("Gecko")&&!(-1!=Gt().toLowerCase().indexOf("webkit")&&!Qt("Edge"))&&!(Qt("Trident")||Qt("MSIE"))&&!Qt("Edge"),nn=-1!=Gt().toLowerCase().indexOf("webkit")&&!Qt("Edge");function rn(){var e=xt.document;return e?e.documentMode:void 0}e:{var an="",on=function(){var e=Gt();return tn?/rv:([^\);]+)(\)|;)/.exec(e):Zt?/Edge\/([\d\.]+)/.exec(e):Jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nn?/WebKit\/(\S+)/.exec(e):Xt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(on&&(an=on?on[1]:""),Jt){var un=rn();if(null!=un&&un>parseFloat(an)){$t=String(un);break e}}$t=an}var sn,ln={};function cn(){return function(e){var t=ln;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Wt(String($t)).split("."),n=Wt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Kt(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Kt(0==a[2].length,0==o[2].length)||Kt(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(xt.document&&Jt){var hn=rn();sn=hn||(parseInt($t,10)||void 0)}else sn=void 0;var fn=sn;function dn(e,t){if(qt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tn){e:{try{Yt(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:pn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&dn.X.h.call(this)}}Ft(dn,qt);var pn={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),yn=0;function mn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++yn,this.ba=this.ea=!1}function gn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function kn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _n(e){var t={};for(var n in e)t[n]=e[n];return t}var bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<bn.length;a++)n=bn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function En(e){this.src=e,this.g={},this.h=0}function Cn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Vt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(gn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Sn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}En.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Sn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new mn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Tn="closure_lm_"+(1e6*Math.random()|0),xn={};function In(e,t,n,r,i){if(r&&r.once)return Dn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)In(e,t[a],n,r,i);return null}return n=Fn(n),e&&e[vn]?e.N(t,n,Dt(r)?!!r.capture:!!r,i):Nn(e,t,n,!1,r,i)}function Nn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Dt(i)?!!i.capture:!!i,u=On(e);if(u||(e[Tn]=u=new En(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ln;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Bt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Dn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Dn(e,t[a],n,r,i);return null}return n=Fn(n),e&&e[vn]?e.O(t,n,Dt(r)?!!r.capture:!!r,i):Nn(e,t,n,!0,r,i)}function Rn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rn(e,t[a],n,r,i);else r=Dt(r)?!!r.capture:!!r,n=Fn(n),e&&e[vn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Sn(a=e.g[t],n,r,i))&&(gn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=On(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Sn(t,n,r,i)),(n=-1<e?t[e]:null)&&An(n))}function An(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[vn])Cn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=On(t))?(Cn(n,e),0==n.h&&(n.src=null,t[Tn]=null)):gn(e)}}}function Pn(e){return e in xn?xn[e]:xn[e]="on"+e}function Ln(e,t){if(e.ba)e=!0;else{t=new dn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&An(e),e=n.call(r,t)}return e}function On(e){return(e=e[Tn])instanceof En?e:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fn(e){return"function"===typeof e?e:(e[Mn]||(e[Mn]=function(t){return e.handleEvent(t)}),e[Mn])}function Un(){Ut.call(this),this.i=new En(this),this.P=this,this.I=null}function Vn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new qt(t,e);else if(t instanceof qt)t.target=t.target||e;else{var i=t;wn(t=new qt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=jn(o,r,!0,t)&&i}if(i=jn(o=t.g=e,r,!0,t)&&i,i=jn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=jn(o=t.g=n[a],r,!1,t)&&i}function jn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Cn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ft(Un,Ut),Un.prototype[vn]=!0,Un.prototype.removeEventListener=function(e,t,n,r){Rn(this,e,t,n,r)},Un.prototype.M=function(){if(Un.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gn(n[r]);delete t.g[e],t.h--}}this.I=null},Un.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Un.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zn=xt.JSON.stringify;function qn(){var e=$n,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bn,Hn=function(){function e(){T(this,e),this.h=this.g=null}return I(e,[{key:"add",value:function(e,t){var n=Wn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Wn=new(function(){function e(t,n){T(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return I(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Kn}),(function(e){return e.reset()})),Kn=function(){function e(){T(this,e),this.next=this.g=this.h=null}return I(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Gn(e){xt.setTimeout((function(){throw e}),0)}function Qn(e,t){Bn||function(){var e=xt.Promise.resolve(void 0);Bn=function(){e.then(Xn)}}(),Yn||(Bn(),Yn=!0),$n.add(e,t)}var Yn=!1,$n=new Hn;function Xn(){for(var e;e=qn();){try{e.h.call(e.g)}catch(n){Gn(n)}var t=Wn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yn=!1}function Jn(e,t){Un.call(this),this.h=e||1,this.g=t||xt,this.j=Ot(this.lb,this),this.l=Date.now()}function Zn(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function er(e,t,n){if("function"===typeof e)n&&(e=Ot(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ot(e.handleEvent,e)}return 2147483647<Number(t)?-1:xt.setTimeout(e,t||0)}function tr(e){e.g=er((function(){e.g=null,e.i&&(e.i=!1,tr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ft(Jn,Un),(Et=Jn.prototype).ca=!1,Et.R=null,Et.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vn(this,"tick"),this.ca&&(Zn(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){Jn.X.M.call(this),Zn(this),delete this.g};var nr=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return I(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:tr(this)}},{key:"M",value:function(){k(g(n.prototype),"M",this).call(this),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ut);function rr(e){Ut.call(this),this.h=e,this.g={}}Ft(rr,Ut);var ir=[];function ar(e,t,n,r){Array.isArray(n)||(n&&(ir[0]=n.toString()),n=ir);for(var i=0;i<n.length;i++){var a=In(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function or(e){kn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&An(e)}),e),e.g={}}function ur(){this.g=!0}function sr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return zn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}rr.prototype.M=function(){rr.X.M.call(this),or(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ur.prototype.Aa=function(){this.g=!1},ur.prototype.info=function(){};var lr={},cr=null;function hr(){return cr=cr||new Un}function fr(e){qt.call(this,lr.Pa,e)}function dr(e){var t=hr();Vn(t,new fr(t))}function pr(e,t){qt.call(this,lr.STAT_EVENT,e),this.stat=t}function vr(e){var t=hr();Vn(t,new pr(t,e))}function yr(e,t){qt.call(this,lr.Qa,e),this.size=t}function mr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return xt.setTimeout((function(){e()}),t)}lr.Pa="serverreachability",Ft(fr,qt),lr.STAT_EVENT="statevent",Ft(pr,qt),lr.Qa="timingevent",Ft(yr,qt);var gr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},kr={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _r(){}function br(e){return e.h||(e.h=e.i())}function wr(){}_r.prototype.h=null;var Er,Cr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Sr(){qt.call(this,"d")}function Tr(){qt.call(this,"c")}function xr(){}function Ir(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new rr(this),this.O=Dr,e=en?125:void 0,this.T=new Jn(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}Ft(Sr,qt),Ft(Tr,qt),Ft(xr,_r),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},Er=new xr;var Dr=45e3,Rr={},Ar={};function Pr(e,t,n){e.K=1,e.v=Jr(Gr(t)),e.s=n,e.P=!0,Lr(e,null)}function Lr(e,t){e.F=Date.now(),Ur(e),e.A=Gr(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),hi(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Nr,e.g=fa(e.l,n?t:null,!e.s),0<e.N&&(e.L=new nr(Ot(e.La,e,e.g),e.N)),ar(e.S,e.g,"readystatechange",e.ib),t=e.H?_n(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),dr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Or(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Mr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Fr(e,n))==Ar){4==t&&(e.o=4,vr(14),i=!1),sr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Rr){e.o=4,vr(15),sr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}sr(e.j,e.m,r,null),Br(e,r)}Or(e)&&r!=Ar&&r!=Rr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ia(t),t.K=!0,vr(11))):(sr(e.j,e.m,n,"[Invalid Chunked Response]"),qr(e),zr(e))}function Fr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ar:(n=Number(t.substring(n,r)),isNaN(n)?Rr:(r+=1)+n>t.length?Ar:(t=t.substr(r,n),e.C=r+n,t))}function Ur(e){e.V=Date.now()+e.O,Vr(e,e.O)}function Vr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=mr(Ot(e.gb,e),t)}function jr(e){e.B&&(xt.clearTimeout(e.B),e.B=null)}function zr(e){0==e.l.G||e.I||ua(e.l,e)}function qr(e){jr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Zn(e.T),or(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Br(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ki(n.h,e)))if(!e.J&&ki(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;oa(n),$i(n)}ra(n),vr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=mr(Ot(n.cb,n),6e3));if(1>=gi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else la(n,11)}else if((e.J||n.g==e)&&oa(n),!Ht(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.h;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(_i(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,Xr(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=ha(r,r.H?r.ka:null,r.V),d.J){bi(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(jr(p),Ur(p)),r.g=d}else na(r);0<n.i.length&&Ji(n)}else"stop"!=a[0]&&"close"!=a[0]||la(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?la(n,7):Yi(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}dr()}catch(a){}}function Hr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Nt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Nt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Nt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Et=Ir.prototype).setTimeout=function(e){this.O=e},Et.ib=function(e){e=e.target;var t=this.L;t&&3==Bi(e)?t.l():this.La(e)},Et.La=function(e){try{if(e==this.g)e:{var t=Bi(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||en||this.g&&(this.h.h||this.g.fa()||Hi(this.g)))){this.I||4!=t||7==n||dr(),jr(this);var r=this.g.aa();this.Y=r;t:if(Or(this)){var i=Hi(this.g);e="";var a=i.length,o=4==Bi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qr(this),zr(this);var u="";break t}this.h.i=new xt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(s)){var c=s;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,vr(12),qr(this),zr(this);break e}sr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Br(this,r)}this.P?(Mr(this,t,u),en&&this.i&&3==t&&(ar(this.S,this.T,"tick",this.hb),this.T.start())):(sr(this.j,this.m,u,null),Br(this,u)),4==t&&qr(this),this.i&&!this.I&&(4==t?ua(this.l,this):(this.i=!1,Ur(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,vr(12)):(this.o=0,vr(13)),qr(this),zr(this)}}}catch(t){}},Et.hb=function(){if(this.g){var e=Bi(this.g),t=this.g.fa();this.C<t.length&&(jr(this),Mr(this,e,t),this.i&&4!=e&&Ur(this))}},Et.cancel=function(){this.I=!0,qr(this)},Et.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(dr(),vr(17)),qr(this),this.o=2,zr(this)):Vr(this,this.V-e)};var Wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kr(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Kr){this.h=void 0!==t?t:e.h,Qr(this,e.j),this.s=e.s,this.g=e.g,Yr(this,e.m),this.l=e.l,t=e.i;var n=new ui;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$r(this,n),this.o=e.o}else e&&(n=String(e).match(Wr))?(this.h=!!t,Qr(this,n[1]||"",!0),this.s=Zr(n[2]||""),this.g=Zr(n[3]||"",!0),Yr(this,n[4]),this.l=Zr(n[5]||"",!0),$r(this,n[6]||"",!0),this.o=Zr(n[7]||"")):(this.h=!!t,this.i=new ui(null,this.h))}function Gr(e){return new Kr(e)}function Qr(e,t,n){e.j=n?Zr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $r(e,t,n){t instanceof ui?(e.i=t,function(e,t){t&&!e.j&&(si(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(li(this,t),hi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ei(t,ai)),e.i=new ui(t,e.h))}function Xr(e,t,n){e.i.set(t,n)}function Jr(e){return Xr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ei(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ti),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ti(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ei(t,ni,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ei(t,ni,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ei(n,"/"==n.charAt(0)?ii:ri,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ei(n,oi)),e.join("")};var ni=/[#\/\?@]/g,ri=/[#\?:]/g,ii=/[#\?]/g,ai=/[#\?@]/g,oi=/#/g;function ui(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function si(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function li(e,t){si(e),t=fi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ci(e,t){return si(e),t=fi(e,t),e.g.has(t)}function hi(e,t,n){li(e,t),0<n.length&&(e.i=null,e.g.set(fi(e,t),jt(n)),e.h+=n.length)}function fi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Et=ui.prototype).add=function(e,t){si(this),this.i=null,e=fi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Et.forEach=function(e,t){si(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Et.oa=function(){si(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Et.W=function(e){si(this);var t=[];if("string"===typeof e)ci(this,e)&&(t=t.concat(this.g.get(fi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Et.set=function(e,t){return si(this),this.i=null,ci(this,e=fi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Et.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var di=I((function e(t,n){T(this,e),this.h=t,this.g=n}));function pi(e){this.l=e||yi,xt.PerformanceNavigationTiming?e=0<(e=xt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(xt.g&&xt.g.Ga&&xt.g.Ga()&&xt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vi,yi=10;function mi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gi(e){return e.h?1:e.g?e.g.size:0}function ki(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _i(e,t){e.g?e.g.add(t):e.h=t}function bi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return jt(e.i)}function Ei(){}function Ci(){this.g=new Ei}function Si(e,t,n){var r=n||"";try{Hr(e,(function(e,n){var i=e;Dt(e)&&(i=zn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ti(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function xi(e){this.l=e.ac||null,this.j=e.jb||!1}function Ii(e,t){Un.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ni,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pi.prototype.cancel=function(){if(this.i=wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ei.prototype.stringify=function(e){return xt.JSON.stringify(e,void 0)},Ei.prototype.parse=function(e){return xt.JSON.parse(e,void 0)},Ft(xi,_r),xi.prototype.g=function(){return new Ii(this.l,this.j)},xi.prototype.i=(vi={},function(){return vi}),Ft(Ii,Un);var Ni=0;function Di(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Ri(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ai(e)}function Ai(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Et=Ii.prototype).open=function(e,t){if(this.readyState!=Ni)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ai(this)},Et.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||xt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ri(this)),this.readyState=Ni},Et.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof xt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Di(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Et.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ri(this):Ai(this),3==this.readyState&&Di(this)}},Et.Va=function(e){this.g&&(this.response=this.responseText=e,Ri(this))},Et.Ua=function(e){this.g&&(this.response=e,Ri(this))},Et.ga=function(){this.g&&Ri(this)},Et.setRequestHeader=function(e,t){this.v.append(e,t)},Et.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pi=xt.JSON.parse;function Li(e){Un.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oi,this.K=this.L=!1}Ft(Li,Un);var Oi="",Mi=/^https?$/i,Fi=["POST","PUT"];function Ui(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Vi(e),zi(e)}function Vi(e){e.D||(e.D=!0,Vn(e,"complete"),Vn(e,"error"))}function ji(e){if(e.h&&"undefined"!=typeof Tt&&(!e.C[1]||4!=Bi(e)||2!=e.aa()))if(e.v&&4==Bi(e))er(e.Ha,0,e);else if(Vn(e,"readystatechange"),4==Bi(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Wr)[1]||null;if(!a&&xt.self&&xt.self.location){var o=xt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Mi.test(a?a.toLowerCase():"")}t=i}if(t)Vn(e,"complete"),Vn(e,"success");else{e.m=6;try{var u=2<Bi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Vi(e)}}finally{zi(e)}}}function zi(e,t){if(e.g){qi(e);var n=e.g,r=e.C[0]?It:null;e.g=null,e.C=null,t||Vn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function qi(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(xt.clearTimeout(e.A),e.A=null)}function Bi(e){return e.g?e.g.readyState:0}function Hi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Na){return null}}function Wi(e){var t="";return kn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ki(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xr(e,t,n))}function Gi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qi(e){this.Ca=0,this.i=[],this.j=new ur,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Gi("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Gi("baseRetryDelayMs",5e3,e),this.bb=Gi("retryDelaySeedMs",1e4,e),this.$a=Gi("forwardChannelMaxRetries",2,e),this.ta=Gi("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new pi(e&&e.concurrentRequestLimit),this.Fa=new Ci,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Yi(e){if(Xi(e),3==e.G){var t=e.U++,n=Gr(e.F);Xr(n,"SID",e.I),Xr(n,"RID",t),Xr(n,"TYPE","terminate"),ea(e,n),(t=new Ir(e,e.j,t,void 0)).K=2,t.v=Jr(Gr(n)),n=!1,xt.navigator&&xt.navigator.sendBeacon&&(n=xt.navigator.sendBeacon(t.v.toString(),"")),!n&&xt.Image&&((new Image).src=t.v,n=!0),n||(t.g=fa(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ur(t)}ca(e)}function $i(e){e.g&&(ia(e),e.g.cancel(),e.g=null)}function Xi(e){$i(e),e.u&&(xt.clearTimeout(e.u),e.u=null),oa(e),e.h.cancel(),e.m&&("number"===typeof e.m&&xt.clearTimeout(e.m),e.m=null)}function Ji(e){mi(e.h)||e.m||(e.m=!0,Qn(e.Ja,e),e.C=0)}function Zi(e,t){var n;n=t?t.m:e.U++;var r=Gr(e.F);Xr(r,"SID",e.I),Xr(r,"RID",n),Xr(r,"AID",e.T),ea(e,r),e.o&&e.s&&Ki(r,e.o,e.s),n=new Ir(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=ta(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),_i(e.h,n),Pr(n,r,t)}function ea(e,t){e.ia&&kn(e.ia,(function(e,n){Xr(t,n,e)})),e.l&&Hr({},(function(e,n){Xr(t,n,e)}))}function ta(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ot(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].h,c=i[s].g;if(0>(l-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Si(c,o,"req"+l+"_")}catch(Va){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function na(e){e.g||e.u||(e.Z=1,Qn(e.Ia,e),e.A=0)}function ra(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=mr(Ot(e.Ia,e),sa(e,e.A)),e.A++,!0)}function ia(e){null!=e.B&&(xt.clearTimeout(e.B),e.B=null)}function aa(e){e.g=new Ir(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Gr(e.sa);Xr(t,"RID","rpc"),Xr(t,"SID",e.I),Xr(t,"CI",e.L?"0":"1"),Xr(t,"AID",e.T),Xr(t,"TYPE","xmlhttp"),ea(e,t),e.o&&e.s&&Ki(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Jr(Gr(t)),n.s=null,n.P=!0,Lr(n,e)}function oa(e){null!=e.v&&(xt.clearTimeout(e.v),e.v=null)}function ua(e,t){var n=null;if(e.g==t){oa(e),ia(e),e.g=null;var r=2}else{if(!ki(e.h,t))return;n=t.D,bi(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Vn(r=hr(),new yr(r,n)),Ji(e)}else na(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(gi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=mr(Ot(e.Ja,e,t),sa(e,e.C)),e.C++,!0))}(e,t)||2==r&&ra(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:la(e,5);break;case 4:la(e,10);break;case 3:la(e,6);break;default:la(e,2)}}function sa(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function la(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ot(e.kb,e);n||(n=new Kr("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Qr(n,"https"),Jr(n)),function(e,t){var n=new ur;if(xt.Image){var r=new Image;r.onload=Mt(Ti,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Mt(Ti,n,r,"TestLoadImage: error",!1,t),r.onabort=Mt(Ti,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Mt(Ti,n,r,"TestLoadImage: timeout",!1,t),xt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vr(2);e.G=0,e.l&&e.l.va(t),ca(e),Xi(e)}function ca(e){if(e.G=0,e.la=[],e.l){var t=wi(e.h);0==t.length&&0==e.i.length||(zt(e.la,t),zt(e.la,e.i),e.h.i.length=0,jt(e.i),e.i.length=0),e.l.ua()}}function ha(e,t,n){var r=n instanceof Kr?Gr(n):new Kr(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Yr(r,r.m);else{var i=xt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Kr(null,void 0);r&&Qr(a,r),t&&(a.g=t),i&&Yr(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Xr(r,n,t),Xr(r,"VER",e.ma),ea(e,r),r}function fa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Li(new xi({jb:!0})):new Li(e.ra)).Ka(e.H),t}function da(){}function pa(){if(Jt&&!(10<=Number(fn)))throw Error("Environmental error: no available transport.")}function va(e,t){Un.call(this),this.g=new Qi(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Ht(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ht(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ga(this)}function ya(e){Sr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ma(){Tr.call(this),this.status=1}function ga(e){this.g=e}(Et=Li.prototype).Ka=function(e){this.L=e},Et.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Er.g(),this.C=this.u?br(this.u):br(Er),this.g.onreadystatechange=Ot(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Ui(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=b(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=xt.FormData&&e instanceof xt.FormData,!(0<=Vt(Fi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=b(n);try{for(c.s();!(s=c.n()).done;){var h=l(s.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qi(this),0<this.B&&((this.K=function(e){return Jt&&cn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ot(this.qa,this)):this.A=er(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ui(this,u)}},Et.qa=function(){"undefined"!=typeof Tt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vn(this,"timeout"),this.abort(8))},Et.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vn(this,"complete"),Vn(this,"abort"),zi(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zi(this,!0)),Li.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?ji(this):this.fb())},Et.fb=function(){ji(this)},Et.aa=function(){try{return 2<Bi(this)?this.g.status:-1}catch(vi){return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch(vi){return""}},Et.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pi(t)}},Et.Ea=function(){return this.m},Et.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Et=Qi.prototype).ma=8,Et.G=1,Et.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Ir(this,this.j,e,void 0),n=this.s;if(this.S&&(n?wn(n=_n(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ta(this,t,r),Xr(i=Gr(this.F),"RID",e),Xr(i,"CVER",22),this.D&&Xr(i,"X-HTTP-Session-Id",this.D),ea(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Wi(n)))+"&"+r:this.o&&Ki(i,this.o,n)),_i(this.h,t),this.Ya&&Xr(i,"TYPE","init"),this.O?(Xr(i,"$req",r),Xr(i,"SID","null"),t.Z=!0,Pr(t,i,null)):Pr(t,i,r),this.G=2}}else 3==this.G&&(e?Zi(this,e):0==this.i.length||mi(this.h)||Zi(this))},Et.Ia=function(){if(this.u=null,aa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=mr(Ot(this.eb,this),e)}},Et.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vr(10),$i(this),aa(this))},Et.cb=function(){null!=this.v&&(this.v=null,$i(this),ra(this),vr(19))},Et.kb=function(e){e?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))},(Et=da.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Ra=function(){},pa.prototype.g=function(e,t){return new va(e,t)},Ft(va,Un),va.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;vr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=ha(e,null,e.V),Ji(e)},va.prototype.close=function(){Yi(this.g)},va.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zn(e),e=n);t.i.push(new di(t.ab++,e)),3==t.G&&Ji(t)},va.prototype.M=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,va.X.M.call(this)},Ft(ya,Sr),Ft(ma,Tr),Ft(ga,da),ga.prototype.xa=function(){Vn(this.g,"a")},ga.prototype.wa=function(e){Vn(this.g,new ya(e))},ga.prototype.va=function(e){Vn(this.g,new ma)},ga.prototype.ua=function(){Vn(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,va.prototype.send=va.prototype.u,va.prototype.open=va.prototype.m,va.prototype.close=va.prototype.close,gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,kr.COMPLETE="complete",wr.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",Un.prototype.listen=Un.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.Oa,Li.prototype.getLastErrorCode=Li.prototype.Ea,Li.prototype.getStatus=Li.prototype.aa,Li.prototype.getResponseJson=Li.prototype.Sa,Li.prototype.getResponseText=Li.prototype.fa,Li.prototype.send=Li.prototype.da,Li.prototype.setWithCredentials=Li.prototype.Ka;var ka=St.createWebChannelTransport=function(){return new pa},_a=St.getStatEventTarget=function(){return hr()},ba=St.ErrorCode=gr,wa=St.EventType=kr,Ea=St.Event=lr,Ca=St.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Sa=St.FetchXmlHttpFactory=xi,Ta=St.WebChannel=wr,xa=St.XhrIo=Li,Ia="@firebase/firestore",Na=function(){function e(t){T(this,e),this.uid=t}return I(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Na.UNAUTHENTICATED=new Na(null),Na.GOOGLE_CREDENTIALS=new Na("google-credentials-uid"),Na.FIRST_PARTY=new Na("first-party-uid"),Na.MOCK_USER=new Na("mock-user");var Da="9.19.0",Ra=new Ce("@firebase/firestore");function Aa(){return Ra.logLevel}function Pa(e){if(Ra.logLevel<=me.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ma);Ra.debug.apply(Ra,["Firestore (".concat(Da,"): ").concat(e)].concat(S(i)))}}function La(e){if(Ra.logLevel<=me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ma);Ra.error.apply(Ra,["Firestore (".concat(Da,"): ").concat(e)].concat(S(i)))}}function Oa(e){if(Ra.logLevel<=me.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ma);Ra.warn.apply(Ra,["Firestore (".concat(Da,"): ").concat(e)].concat(S(i)))}}function Ma(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Da,") INTERNAL ASSERTION FAILED: ")+e;throw La(t),new Error(t)}function Ua(e,t){e||Fa()}function Va(e,t){return e}var ja={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},za=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return I(n)}(X),qa=I((function e(){var t=this;T(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ba=I((function e(t,n){T(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ha=function(){function e(){T(this,e)}return I(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Na.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Wa=function(){function e(t){T(this,e),this.token=t,this.changeListener=null}return I(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ka=function(){function e(t){T(this,e),this.t=t,this.currentUser=Na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return I(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},u=new qa;this.o=function(){n.i++,n.currentUser=n.u(),u.resolve(),u=new qa,e.enqueueRetryable((function(){return a(n.currentUser)}))};var s=function(){var t=u;e.enqueueRetryable(o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},l=function(e){Pa("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return l(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?l(e):(Pa("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new qa)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Pa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ua("string"==typeof n.accessToken),new Ba(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ua(null===e||"string"==typeof e),new Na(e)}}]),e}(),Ga=function(){function e(t,n,r){T(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Na.FIRST_PARTY,this.g=new Map}return I(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Qa=function(){function e(t,n,r){T(this,e),this.h=t,this.l=n,this.m=r}return I(e,[{key:"getToken",value:function(){return Promise.resolve(new Ga(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Na.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ya=I((function e(t){T(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),$a=function(){function e(t){T(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return I(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Pa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Pa("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Pa("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Pa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ua("string"==typeof t.token),e.T=t.token,new Ya(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Xa(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ja=function(){function e(){T(this,e)}return I(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Xa(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Za(e,t){return e<t?-1:e>t?1:0}function eo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var to=function(){function e(t,n){if(T(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new za(ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new za(ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new za(ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new za(ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return I(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Za(this.nanoseconds,e.nanoseconds):Za(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),no=function(){function e(t){T(this,e),this.timestamp=t}return I(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new to(0,0))}},{key:"max",value:function(){return new e(new to(253402300799,999999999))}}]),e}(),ro=function(){function e(t,n,r){T(this,e),void 0===n?n=0:n>t.length&&Fa(),void 0===r?r=t.length-n:r>t.length-n&&Fa(),this.segments=t,this.offset=n,this.len=r}return I(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),io=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new za(ja.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,S(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ro),ao=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oo=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ao.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new za(ja.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new za(ja.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new za(ja.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new za(ja.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ro),uo=function(){function e(t){T(this,e),this.path=t}return I(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===io.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(io.fromString(t))}},{key:"fromName",value:function(t){return new e(io.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(io.emptyPath())}},{key:"comparator",value:function(e,t){return io.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new io(t.slice()))}}]),e}(),so=I((function e(t,n,r,i){T(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));so.UNKNOWN_ID=-1;function lo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=no.fromTimestamp(1e9===r?new to(n+1,0):new to(n,r));return new ho(i,uo.empty(),t)}function co(e){return new ho(e.readTime,e.key,-1)}var ho=function(){function e(t,n,r){T(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return I(e,null,[{key:"min",value:function(){return new e(no.min(),uo.empty(),-1)}},{key:"max",value:function(){return new e(no.max(),uo.empty(),-1)}}]),e}();function fo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=uo.comparator(e.documentKey,t.documentKey))?n:Za(e.largestBatchId,t.largestBatchId)}var po="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vo=function(){function e(){T(this,e),this.onCommittedListeners=[]}return I(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function yo(e){return mo.apply(this,arguments)}function mo(){return mo=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ja.FAILED_PRECONDITION&&t.message===po){e.next=2;break}throw t;case 2:Pa("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}var go=function(){function e(t){var n=this;T(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return I(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Fa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function ko(e){return"IndexedDbTransactionError"===e.name}var _o=function(){function e(t,n){var r=this;T(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return I(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function bo(e){return null==e}function wo(e){return 0===e&&1/e==-1/0}function Eo(e){return"number"==typeof e&&Number.isInteger(e)&&!wo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}_o.ct=-1;var Co=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),So=([].concat(S(Co),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),To=So;[].concat(To,["indexConfiguration","indexState","indexEntries"]);function xo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Io(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function No(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Do=function(){function e(t,n){T(this,e),this.comparator=t,this.root=n||Ao.EMPTY}return I(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ao.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ao.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ro(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ro(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ro(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ro(this.root,e,this.comparator,!0)}}]),e}(),Ro=function(){function e(t,n,r,i){T(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return I(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ao=function(){function e(t,n,r,i,a){T(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return I(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fa();if(this.right.isRed())throw Fa();var e=this.left.check();if(e!==this.right.check())throw Fa();return e+(this.isRed()?0:1)}}]),e}();Ao.EMPTY=null,Ao.RED=!0,Ao.BLACK=!1,Ao.EMPTY=new(function(){function e(){T(this,e),this.size=0}return I(e,[{key:"key",get:function(){throw Fa()}},{key:"value",get:function(){throw Fa()}},{key:"color",get:function(){throw Fa()}},{key:"left",get:function(){throw Fa()}},{key:"right",get:function(){throw Fa()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ao(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Po=function(){function e(t){T(this,e),this.comparator=t,this.data=new Do(this.comparator)}return I(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Lo(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Lo(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Lo=function(){function e(t){T(this,e),this.iter=t}return I(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Oo=function(){function e(t){T(this,e),this.fields=t,t.sort(oo.comparator)}return I(e,[{key:"unionWith",value:function(t){var n,r=new Po(oo.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=b(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(l){u.e(l)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return eo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Mo=function(e){w(n,e);var t=C(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return I(n)}(_(Error));var Fo=function(e){function t(e){T(this,t),this.binaryString=e}return I(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Za(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Mo("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Fo.EMPTY_BYTE_STRING=new Fo("");var Uo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(e){if(Ua(!!e),"string"==typeof e){var t=0,n=Uo.exec(e);if(Ua(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jo(e.seconds),nanos:jo(e.nanos)}}function jo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zo(e){return"string"==typeof e?Fo.fromBase64String(e):Fo.fromUint8Array(e)}function qo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bo(e){var t=e.mapValue.fields.__previous_value__;return qo(t)?Bo(t):t}function Ho(e){var t=Vo(e.mapValue.fields.__local_write_time__.timestampValue);return new to(t.seconds,t.nanos)}var Wo=I((function e(t,n,r,i,a,o,u,s){T(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ko=function(){function e(t,n){T(this,e),this.projectId=t,this.database=n||"(default)"}return I(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Go={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qo(e)?4:su(e)?9007199254740991:10:Fa()}function Yo(e,t){if(e===t)return!0;var n=Qo(e);if(n!==Qo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ho(e).isEqual(Ho(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Vo(e.timestampValue),r=Vo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zo(e.bytesValue).isEqual(zo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jo(e.geoPointValue.latitude)===jo(t.geoPointValue.latitude)&&jo(e.geoPointValue.longitude)===jo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jo(e.integerValue)===jo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=jo(e.doubleValue),r=jo(t.doubleValue);return n===r?wo(n)===wo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return eo(e.arrayValue.values||[],t.arrayValue.values||[],Yo);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xo(n)!==xo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yo(n[i],r[i])))return!1;return!0}(e,t);default:return Fa()}}function $o(e,t){return void 0!==(e.values||[]).find((function(e){return Yo(e,t)}))}function Xo(e,t){if(e===t)return 0;var n=Qo(e),r=Qo(t);if(n!==r)return Za(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Za(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=jo(e.integerValue||e.doubleValue),r=jo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jo(e.timestampValue,t.timestampValue);case 4:return Jo(Ho(e),Ho(t));case 5:return Za(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zo(e),r=zo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Za(n[i],r[i]);if(0!==a)return a}return Za(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Za(jo(e.latitude),jo(t.latitude));return 0!==n?n:Za(jo(e.longitude),jo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xo(n[i],r[i]);if(a)return a}return Za(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Go.mapValue&&t===Go.mapValue)return 0;if(e===Go.mapValue)return 1;if(t===Go.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Za(r[o],a[o]);if(0!==u)return u;var s=Xo(n[r[o]],i[a[o]]);if(0!==s)return s}return Za(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Fa()}}function Jo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Za(e,t);var n=Vo(e),r=Vo(t),i=Za(n.seconds,r.seconds);return 0!==i?i:Za(n.nanos,r.nanos)}function Zo(e){return eu(e)}function eu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Vo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zo(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,uo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=eu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(eu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Fa();var t,n}function tu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nu(e){return!!e&&"integerValue"in e}function ru(e){return!!e&&"arrayValue"in e}function iu(e){return!!e&&"nullValue"in e}function au(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ou(e){return!!e&&"mapValue"in e}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Io(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=uu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function su(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var lu=function(){function e(t){T(this,e),this.value=t}return I(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ou(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}},{key:"setAll",value:function(e){var t=this,n=oo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yo(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ou(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Io(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function cu(e){var t=[];return Io(e.fields,(function(e,n){var r=new oo([e]);if(ou(n)){var i=cu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Oo(t)}var hu=function(){function e(t,n,r,i,a,o,u){T(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return I(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(no.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=lu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=lu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=no.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,no.min(),no.min(),no.min(),lu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,no.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,no.min(),no.min(),lu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,no.min(),no.min(),lu.empty(),2)}}]),e}(),fu=I((function e(t,n){T(this,e),this.position=t,this.inclusive=n}));function du(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?uo.comparator(uo.fromName(o.referenceValue),n.key):Xo(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yo(e.position[n],t.position[n]))return!1;return!0}var vu=I((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";T(this,e),this.field=t,this.dir=n}));function yu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var mu=I((function e(){T(this,e)})),gu=function(e){w(n,e);var t=C(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return I(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xo(t,this.value)):null!==t&&Qo(this.value)===Qo(t)&&this.matchesComparison(Xo(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fa()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Tu(e,t,r):"array-contains"===t?new Du(e,r):"in"===t?new Ru(e,r):"not-in"===t?new Au(e,r):"array-contains-any"===t?new Pu(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new xu(e,n):new Iu(e,n)}}]),n}(mu),ku=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return I(n,[{key:"matches",value:function(e){return _u(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=b(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(mu);function _u(e){return"and"===e.op}function bu(e){return wu(e)&&_u(e)}function wu(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ku)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Eu(e){if(e instanceof gu)return e.field.canonicalString()+e.op.toString()+Zo(e.value);if(bu(e))return e.filters.map((function(e){return Eu(e)})).join(",");var t=e.filters.map((function(e){return Eu(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Cu(e,t){return e instanceof gu?function(e,t){return t instanceof gu&&e.op===t.op&&e.field.isEqual(t.field)&&Yo(e.value,t.value)}(e,t):e instanceof ku?function(e,t){return t instanceof ku&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Cu(n,t.filters[r])}),!0)}(e,t):void Fa()}function Su(e){return e instanceof gu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zo(e.value))}(e):e instanceof ku?function(e){return e.op.toString()+" {"+e.getFilters().map(Su).join(" ,")+"}"}(e):"Filter"}var Tu=function(e){w(n,e);var t=C(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,i)).key=uo.fromName(i.referenceValue),a}return I(n,[{key:"matches",value:function(e){var t=uo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(gu),xu=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"in",r)).keys=Nu("in",r),i}return I(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gu),Iu=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"not-in",r)).keys=Nu("not-in",r),i}return I(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gu);function Nu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return uo.fromName(e.referenceValue)}))}var Du=function(e){w(n,e);var t=C(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains",r)}return I(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ru(t)&&$o(t.arrayValue,this.value)}}]),n}(gu),Ru=function(e){w(n,e);var t=C(n);function n(e,r){return T(this,n),t.call(this,e,"in",r)}return I(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$o(this.value.arrayValue,t)}}]),n}(gu),Au=function(e){w(n,e);var t=C(n);function n(e,r){return T(this,n),t.call(this,e,"not-in",r)}return I(n,[{key:"matches",value:function(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$o(this.value.arrayValue,t)}}]),n}(gu),Pu=function(e){w(n,e);var t=C(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains-any",r)}return I(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ru(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $o(t.value.arrayValue,e)}))}}]),n}(gu),Lu=I((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;T(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Ou(e){return new Lu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mu(e){var t=Va(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Eu(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),bo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zo(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zo(e)})).join(",")),t.ft=n}return t.ft}function Fu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Cu(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pu(e.startAt,t.startAt)&&pu(e.endAt,t.endAt)}function Uu(e){return uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Vu=I((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;T(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function ju(e,t,n,r,i,a,o,u){return new Vu(e,t,n,r,i,a,o,u)}function zu(e){return new Vu(e)}function qu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hu(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Wu(e){return null!==e.collectionGroup}function Ku(e){var t=Va(e);if(null===t.dt){t.dt=[];var n=Hu(t),r=Bu(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new vu(n)),t.dt.push(new vu(oo.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new vu(oo.keyField(),s))}}}return t.dt}function Gu(e){var t=Va(e);if(!t.wt)if("F"===t.limitType)t.wt=Ou(t.path,t.collectionGroup,Ku(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(Ku(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vu(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var u=t.endAt?new fu(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fu(t.startAt.position,t.startAt.inclusive):null;t.wt=Ou(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Qu(e,t){t.getFirstInequalityField(),Hu(e);var n=e.filters.concat([t]);return new Vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yu(e,t,n){return new Vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $u(e,t){return Fu(Gu(e),Gu(t))&&e.limitType===t.limitType}function Xu(e){return"".concat(Mu(Gu(e)),"|lt:").concat(e.limitType)}function Ju(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Su(e)})).join(", "),"]")),bo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zo(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zo(e)})).join(",")),"Target(".concat(t,")")}(Gu(e)),"; limitType=").concat(e.limitType,")")}function Zu(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(Ku(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=du(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ku(e),t))&&!(e.endAt&&!function(e,t,n){var r=du(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ku(e),t))}(e,t)}function es(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ts(e){return function(t,n){var r,i=!1,a=b(Ku(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ns(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ns(e,t,n){var r=e.field.isKeyField()?uo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xo(r,i):Fa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fa()}}var rs=function(){function e(t,n){T(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return I(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Io(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return No(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),is=new Do(uo.comparator);function as(){return is}var os=new Do(uo.comparator);function us(){for(var e=os,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ss(e){var t=os;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function ls(){return hs()}function cs(){return hs()}function hs(){return new rs((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fs=new Do(uo.comparator),ds=new Po(uo.comparator);function ps(){for(var e=ds,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vs=new Po(Za);function ys(){return vs}function ms(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wo(t)?"-0":t}}function gs(e){return{integerValue:""+e}}function ks(e,t){return Eo(t)?gs(t):ms(e,t)}var _s=I((function e(){T(this,e),this._=void 0}));function bs(e,t,n){return e instanceof Cs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ss?Ts(e,t):e instanceof xs?Is(e,t):function(e,t){var n=Es(e,t),r=Ds(n)+Ds(e._t);return nu(n)&&nu(e._t)?gs(r):ms(e.serializer,r)}(e,t)}function ws(e,t,n){return e instanceof Ss?Ts(e,t):e instanceof xs?Is(e,t):n}function Es(e,t){return e instanceof Ns?nu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Cs=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n)}(_s),Ss=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return I(n)}(_s);function Ts(e,t){var n,r=Rs(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yo(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var xs=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return I(n)}(_s);function Is(e,t){var n,r=Rs(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yo(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ns=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return I(n)}(_s);function Ds(e){return jo(e.integerValue||e.doubleValue)}function Rs(e){return ru(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var As=I((function e(t,n){T(this,e),this.field=t,this.transform=n}));var Ps=I((function e(t,n){T(this,e),this.version=t,this.transformResults=n})),Ls=function(){function e(t,n){T(this,e),this.updateTime=t,this.exists=n}return I(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Os(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ms=I((function e(){T(this,e)}));function Fs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ys(e.key,Ls.none()):new qs(e.key,e.data,Ls.none());var n,r=e.data,i=lu.empty(),a=new Po(oo.comparator),o=b(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new Bs(e.key,i,new Oo(a.toArray()),Ls.none())}function Us(e,t,n){e instanceof qs?function(e,t,n){var r=e.value.clone(),i=Ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bs?function(e,t,n){if(Os(e.precondition,t)){var r=Ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vs(e,t,n,r){return e instanceof qs?function(e,t,n,r){if(!Os(e.precondition,t))return n;var i=e.value.clone(),a=Ks(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Bs?function(e,t,n,r){if(!Os(e.precondition,t))return n;var i=Ks(e.fieldTransforms,r,t),a=t.data;return a.setAll(Hs(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Os(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function js(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Es(a.transform,o||null);null!=u&&(null===r&&(r=lu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function zs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&eo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ss&&t instanceof Ss||e instanceof xs&&t instanceof xs?eo(e.elements,t.elements,Yo):e instanceof Ns&&t instanceof Ns?Yo(e._t,t._t):e instanceof Cs&&t instanceof Cs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var qs=function(e){w(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return T(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return I(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ms),Bs=function(e){w(n,e);var t=C(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return T(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return I(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ms);function Hs(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ws(e,t,n){var r=new Map;Ua(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ws(o,u,n[i]))}return r}function Ks(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,bs(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Gs,Qs,Ys=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return I(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ms),$s=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return I(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ms),Xs=function(){function e(t,n,r,i){T(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return I(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Us(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Vs(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Vs(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=cs();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Fs(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(no.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ps())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(function(e,t){return zs(e,t)}))&&eo(this.baseMutations,e.baseMutations,(function(e,t){return zs(e,t)}))}}]),e}(),Js=function(){function e(t,n,r,i){T(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return I(e,null,[{key:"from",value:function(t,n,r){Ua(t.mutations.length===r.length);for(var i=fs,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zs=function(){function e(t,n){T(this,e),this.largestBatchId=t,this.mutation=n}return I(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),el=I((function e(t){T(this,e),this.count=t}));function tl(e){switch(e){default:return Fa();case ja.CANCELLED:case ja.UNKNOWN:case ja.DEADLINE_EXCEEDED:case ja.RESOURCE_EXHAUSTED:case ja.INTERNAL:case ja.UNAVAILABLE:case ja.UNAUTHENTICATED:return!1;case ja.INVALID_ARGUMENT:case ja.NOT_FOUND:case ja.ALREADY_EXISTS:case ja.PERMISSION_DENIED:case ja.FAILED_PRECONDITION:case ja.ABORTED:case ja.OUT_OF_RANGE:case ja.UNIMPLEMENTED:case ja.DATA_LOSS:return!0}}function nl(e){if(void 0===e)return La("GRPC error has no .code"),ja.UNKNOWN;switch(e){case Gs.OK:return ja.OK;case Gs.CANCELLED:return ja.CANCELLED;case Gs.UNKNOWN:return ja.UNKNOWN;case Gs.DEADLINE_EXCEEDED:return ja.DEADLINE_EXCEEDED;case Gs.RESOURCE_EXHAUSTED:return ja.RESOURCE_EXHAUSTED;case Gs.INTERNAL:return ja.INTERNAL;case Gs.UNAVAILABLE:return ja.UNAVAILABLE;case Gs.UNAUTHENTICATED:return ja.UNAUTHENTICATED;case Gs.INVALID_ARGUMENT:return ja.INVALID_ARGUMENT;case Gs.NOT_FOUND:return ja.NOT_FOUND;case Gs.ALREADY_EXISTS:return ja.ALREADY_EXISTS;case Gs.PERMISSION_DENIED:return ja.PERMISSION_DENIED;case Gs.FAILED_PRECONDITION:return ja.FAILED_PRECONDITION;case Gs.ABORTED:return ja.ABORTED;case Gs.OUT_OF_RANGE:return ja.OUT_OF_RANGE;case Gs.UNIMPLEMENTED:return ja.UNIMPLEMENTED;case Gs.DATA_LOSS:return ja.DATA_LOSS;default:return Fa()}}(Qs=Gs||(Gs={}))[Qs.OK=0]="OK",Qs[Qs.CANCELLED=1]="CANCELLED",Qs[Qs.UNKNOWN=2]="UNKNOWN",Qs[Qs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qs[Qs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qs[Qs.NOT_FOUND=5]="NOT_FOUND",Qs[Qs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qs[Qs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qs[Qs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qs[Qs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qs[Qs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qs[Qs.ABORTED=10]="ABORTED",Qs[Qs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qs[Qs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qs[Qs.INTERNAL=13]="INTERNAL",Qs[Qs.UNAVAILABLE=14]="UNAVAILABLE",Qs[Qs.DATA_LOSS=15]="DATA_LOSS";var rl=function(){function e(){T(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return I(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return il}},{key:"getOrCreateInstance",value:function(){return null===il&&(il=new e),il}}]),e}(),il=null,al=function(){function e(t,n,r,i,a){T(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return I(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ol.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(no.min(),i,ys(),as(),ps())}}]),e}(),ol=function(){function e(t,n,r,i,a){T(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return I(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,ps(),ps(),ps())}}]),e}(),ul=I((function e(t,n,r,i){T(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),sl=I((function e(t,n){T(this,e),this.targetId=t,this.Et=n})),ll=I((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;T(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),cl=function(){function e(){T(this,e),this.At=0,this.Rt=dl(),this.vt=Fo.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return I(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=ps(),t=ps(),n=ps();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fa()}})),new ol(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=dl()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),hl=function(){function e(t){T(this,e),this.Ft=t,this.Bt=new Map,this.Lt=as(),this.qt=fl(),this.Ut=new Po(Za)}return I(e,[{key:"Kt",value:function(e){var t,n=b(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Fa()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Uu(a))if(0===r){var o=new uo(a.path);this.Qt(n,o,hu.newNoDocument(o,no.min()))}else Ua(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=rl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Uu(a.target)){var o=new uo(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,hu.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=ps();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new al(e,n,this.Ut,this.Lt,r);return this.Lt=as(),this.qt=fl(),this.Ut=new Po(Za),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new cl,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Po(Za),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Pa("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new cl),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function fl(){return new Do(uo.comparator)}function dl(){return new Do(uo.comparator)}var pl={asc:"ASCENDING",desc:"DESCENDING"},vl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yl={and:"AND",or:"OR"},ml=I((function e(t,n){T(this,e),this.databaseId=t,this.useProto3Json=n}));function gl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _l(e,t){return gl(e,t.toTimestamp())}function bl(e){return Ua(!!e),no.fromTimestamp(function(e){var t=Vo(e);return new to(t.seconds,t.nanos)}(e))}function wl(e,t){return function(e){return new io(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function El(e){var t=io.fromString(e);return Ua(Bl(t)),t}function Cl(e,t){return wl(e.databaseId,t.path)}function Sl(e,t){var n=El(t);if(n.get(1)!==e.databaseId.projectId)throw new za(ja.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new za(ja.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uo(Nl(n))}function Tl(e,t){return wl(e.databaseId,t)}function xl(e){var t=El(e);return 4===t.length?io.emptyPath():Nl(t)}function Il(e){return new io(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Nl(e){return Ua(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dl(e,t,n){return{name:Cl(e,t),fields:n.value.mapValue.fields}}function Rl(e,t){var n;if(t instanceof qs)n={update:Dl(e,t.key,t.value)};else if(t instanceof Ys)n={delete:Cl(e,t.key)};else if(t instanceof Bs)n={update:Dl(e,t.key,t.data),updateMask:ql(t.fieldMask)};else{if(!(t instanceof $s))return Fa();n={verify:Cl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Cs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ss)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ns)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Fa()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_l(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fa()}(e,t.precondition)),n}function Al(e,t){return{documents:[Tl(e,t.path)]}}function Pl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Tl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Tl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return zl(ku.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Vl(e.field),direction:Ml(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||bo(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ll(e){var t=xl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ua(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ol(e);return t instanceof ku&&bu(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new vu(jl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return bo(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new fu(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new fu(n,t)}(n.endAt)),ju(t,i,u,o,s,"F",l,c)}function Ol(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jl(e.unaryFilter.field);return gu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jl(e.unaryFilter.field);return gu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jl(e.unaryFilter.field);return gu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jl(e.unaryFilter.field);return gu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fa()}}(e):void 0!==e.fieldFilter?function(e){return gu.create(jl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ku.create(e.compositeFilter.filters.map((function(e){return Ol(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fa()}}(e.compositeFilter.op))}(e):Fa()}function Ml(e){return pl[e]}function Fl(e){return vl[e]}function Ul(e){return yl[e]}function Vl(e){return{fieldPath:e.canonicalString()}}function jl(e){return oo.fromServerFormat(e.fieldPath)}function zl(e){return e instanceof gu?function(e){if("=="===e.op){if(au(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NAN"}};if(iu(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(au(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NOT_NAN"}};if(iu(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vl(e.field),op:Fl(e.op),value:e.value}}}(e):e instanceof ku?function(e){var t=e.getFilters().map((function(e){return zl(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Ul(e.op),filters:t}}}(e):Fa()}function ql(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Bl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Hl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:no.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:no.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fo.EMPTY_BYTE_STRING;T(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return I(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Wl=I((function e(t){T(this,e),this.se=t}));function Kl(e){var t=Ll({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yu(t,t.limit,"L"):t}var Gl=function(){function e(){T(this,e)}return I(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(jo(e.integerValue));else if("doubleValue"in e){var n=jo(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),wo(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(zo(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?su(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Fa()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),uo.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();Gl.pe=new Gl;var Ql=function(){function e(){T(this,e),this.He=new Yl}return I(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),go.resolve()}},{key:"getCollectionParents",value:function(e,t){return go.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return go.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return go.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return go.resolve(null)}},{key:"getIndexType",value:function(e,t){return go.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return go.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return go.resolve(null)}},{key:"getMinOffset",value:function(e,t){return go.resolve(ho.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return go.resolve(ho.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return go.resolve()}},{key:"updateIndexEntries",value:function(e,t){return go.resolve()}}]),e}(),Yl=function(){function e(){T(this,e),this.index={}}return I(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Po(io.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Po(io.comparator)).toArray()}}]),e}();new Uint8Array(0);var $l=function(){function e(t,n,r){T(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return I(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();$l.DEFAULT_COLLECTION_PERCENTILE=10,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$l.DEFAULT=new $l(41943040,$l.DEFAULT_COLLECTION_PERCENTILE,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$l.DISABLED=new $l(-1,0,0);var Xl=function(){function e(t){T(this,e),this.Rn=t}return I(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}();var Jl=function(){function e(){T(this,e),this.changes=new rs((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return I(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,hu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?go.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Zl=I((function e(t,n){T(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ec=function(){function e(t,n,r,i){T(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return I(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Vs(r.mutation,e,Oo.empty(),to.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,ps()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ps(),i=ls();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=us();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=ls();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,ps())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=as(),a=hs(),o=hs();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Bs)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Vs(o.mutation,t,o.mutation.getFieldMask(),to.now())):a.set(t.key,Oo.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Zl(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=hs(),i=new Do((function(e,t){return e-t})),a=ps();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Oo.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||ps()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,l=i.value,c=cs();l.forEach((function(e){if(!a.has(e)){var n=Fs(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,c))};u.hasNext();)s();return go.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):go.resolve(ls()),u=-1,s=a;return o.next((function(t){return go.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?go.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,ps())})).next((function(e){return{batchId:u,changes:ss(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new uo(t)).next((function(e){var t=us();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=us();return this.indexManager.getCollectionParents(e,i).next((function(o){return go.forEach(o,(function(o){var u=function(e,t){return new Vu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,hu.newInvalidDocument(r)))}));var n=us();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Vs(a.mutation,i,Oo.empty(),to.now()),Zu(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),tc=function(){function e(t){T(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return I(e,[{key:"getBundleMetadata",value:function(e,t){return go.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:bl(n.createTime)}),go.resolve()}},{key:"getNamedQuery",value:function(e,t){return go.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Kl(e.bundledQuery),readTime:bl(e.readTime)}}(t)),go.resolve()}}]),e}(),nc=function(){function e(){T(this,e),this.overlays=new Do(uo.comparator),this.ts=new Map}return I(e,[{key:"getOverlay",value:function(e,t){return go.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=ls();return go.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),go.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),go.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ls(),i=t.length+1,a=new uo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return go.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Do((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ls(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ls(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return go.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zs(t,n));var a=this.ts.get(t);void 0===a&&(a=ps(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),rc=function(){function e(){T(this,e),this.es=new Po(ic.ns),this.ss=new Po(ic.rs)}return I(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ic(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new ic(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new uo(new io([])),r=new ic(n,e),i=new ic(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new uo(new io([])),n=new ic(t,e),r=new ic(t,e+1),i=ps();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ic(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ic=function(){function e(t,n){T(this,e),this.key=t,this.ds=n}return I(e,null,[{key:"ns",value:function(e,t){return uo.comparator(e.key,t.key)||Za(e.ds,t.ds)}},{key:"rs",value:function(e,t){return Za(e.ds,t.ds)||uo.comparator(e.key,t.key)}}]),e}(),ac=function(){function e(t,n){T(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Po(ic.ns)}return I(e,[{key:"checkEmpty",value:function(e){return go.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Xs(i,t,n,r);this.mutationQueue.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new ic(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return go.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return go.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return go.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return go.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return go.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ic(t,0),i=new ic(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),go.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Po(Za);return t.forEach((function(e){var t=new ic(e,0),i=new ic(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),go.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;uo.isDocumentKey(i)||(i=i.child(""));var a=new ic(new uo(i),0),o=new Po(Za);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),go.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ua(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return go.forEach(t.mutations,(function(i){var a=new ic(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ic(t,0),r=this._s.firstAfterOrEqual(n);return go.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,go.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),oc=function(){function e(t){T(this,e),this.Ts=t,this.docs=new Do(uo.comparator),this.size=0}return I(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return go.resolve(n?n.document.mutableCopy():hu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=as();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():hu.newInvalidDocument(e))})),go.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=as(),a=t.path,o=new uo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),l=s.key,c=s.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||fo(co(c),n)<=0||(r.has(c.key)||Zu(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return go.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Fa()}},{key:"Es",value:function(e,t){return go.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new uc(this)}},{key:"getSize",value:function(e){return go.resolve(this.size)}}]),e}(),uc=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).Jn=e,r}return I(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),go.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(Jl),sc=function(){function e(t){T(this,e),this.persistence=t,this.As=new rs((function(e){return Mu(e)}),Fu),this.lastRemoteSnapshotVersion=no.min(),this.highestTargetId=0,this.Rs=0,this.vs=new rc,this.targetCount=0,this.bs=Xl.vn()}return I(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),go.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return go.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return go.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),go.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),go.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Xl(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,go.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),go.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,go.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),go.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return go.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return go.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),go.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),go.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),go.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return go.resolve(n)}},{key:"containsKey",value:function(e,t){return go.resolve(this.vs.containsKey(t))}}]),e}(),lc=function(){function e(t,n){var r=this;T(this,e),this.Ps={},this.overlays={},this.Vs=new _o(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new sc(this),this.indexManager=new Ql,this.remoteDocumentCache=new oc((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Wl(n),this.xs=new tc(this.serializer)}return I(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new nc,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new ac(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Pa("MemoryPersistence","Starting transaction:",e);var i=new cc(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return go.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cc=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return I(n)}(vo),hc=function(){function e(t){T(this,e),this.persistence=t,this.$s=new rc,this.Ms=null}return I(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Fa()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),go.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),go.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),go.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return go.forEach(this.Bs,(function(r){var i=uo.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,no.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return go.or([function(){return go.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}();var fc=function(){function e(t,n,r,i){T(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return I(e,null,[{key:"Di",value:function(t,n){var r,i=ps(),a=ps(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),dc=function(){function e(){T(this,e),this.Ci=!1}return I(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(qu(t))return go.resolve(null);var r=Gu(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Yu(t,null,"F"),r=Gu(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=ps.apply(void 0,S(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Yu(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return qu(t)||r.isEqual(no.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Aa()<=me.DEBUG&&Pa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ju(t)),i.Fi(e,o,t,lo(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Po(ts(e));return t.forEach((function(t,r){Zu(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Aa()<=me.DEBUG&&Pa("QueryEngine","Using full collection scan to execute query:",Ju(t)),this.xi.getDocumentsMatchingQuery(e,t,ho.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),pc=function(){function e(t,n,r,i){T(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new Do(Za),this.qi=new rs((function(e){return Mu(e)}),Fu),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return I(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ec(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function vc(e,t,n,r){return new pc(e,t,n,r)}function yc(e,t){return mc.apply(this,arguments)}function mc(){return mc=o(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=ps(),s=b(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,h=b(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=b(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(e,t){var n=Va(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=go.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ua(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=ps(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function kc(e){var t=Va(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function _c(e,t){var n=Va(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?l=l.withResumeToken(Fo.EMPTY_BYTE_STRING,no.min()).withLastLimboFreeSnapshotVersion(no.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.Ds.updateTargetData(e,l))}}));var u=as(),s=ps();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bc(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(no.min())){var l=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return go.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function bc(e,t,n){var r=ps(),i=ps();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=as();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(no.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Pa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function wc(e,t){var n=Va(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ec(e,t){var n=Va(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,go.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Hl(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Cc(e,t,n){return Sc.apply(this,arguments)}function Sc(){return Sc=o(i().mark((function e(t,n,r){var a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Va(t),o=a.Li.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",u,(function(e){return a.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ko(e.t1)){e.next=12;break}throw e.t1;case 12:Pa("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.Li=a.Li.remove(n),a.qi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Sc.apply(this,arguments)}function Tc(e,t,n){var r=Va(e),i=no.min(),a=ps();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Va(e),i=r.qi.get(n);return void 0!==i?go.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,Gu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:no.min(),n?a:ps())})).next((function(e){return xc(r,es(t),e),{documents:e,Wi:a}}))}))}function xc(e,t,n){var r=e.Ui.get(t)||no.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}var Ic=function(){function e(){T(this,e),this.activeTargetIds=ys()}return I(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Nc=function(){function e(){T(this,e),this.Br=new Ic,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return I(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Ic,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Dc=function(){function e(){T(this,e)}return I(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Rc=function(){function e(){var t=this;T(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return I(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Pa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){Pa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ac=null;function Pc(){return null===Ac?Ac=268435456+Math.round(2147483648*Math.random()):Ac++,"0x"+Ac.toString(16)}var Lc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Oc=function(){function e(t){T(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return I(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Mc="WebChannelConnection",Fc=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return I(n,[{key:"lo",value:function(e,t,n,r){var i=Pc();return new Promise((function(a,o){var u=new xa;u.setWithCredentials(!0),u.listenOnce(wa.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case ba.NO_ERROR:var t=u.getResponseJson();Pa(Mc,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case ba.TIMEOUT:Pa(Mc,"RPC '".concat(e,"' ").concat(i," timed out")),o(new za(ja.DEADLINE_EXCEEDED,"Request time out"));break;case ba.HTTP_ERROR:var n=u.getStatus();if(Pa(Mc,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ja).indexOf(t)>=0?t:ja.UNKNOWN}(s.status);o(new za(l,s.message))}else o(new za(ja.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new za(ja.UNAVAILABLE,"Connection failed."));break;default:Fa()}}finally{Pa(Mc,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Pa(Mc,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Pc(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ka(),o=_a(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Sa({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Pa(Mc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var l=a.createWebChannel(s,u),c=!1,h=!1,f=new Oc({Wr:function(t){h?Pa(Mc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(c||(Pa(Mc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),c=!0),Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Hr:function(){return l.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l,Ta.EventType.OPEN,(function(){h||Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(l,Ta.EventType.CLOSE,(function(){h||(h=!0,Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.so())})),d(l,Ta.EventType.ERROR,(function(t){h||(h=!0,Oa(Mc,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.so(new za(ja.UNAVAILABLE,"The operation could not be completed")))})),d(l,Ta.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Ua(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Gs[e];if(void 0!==t)return nl(t)}(u),c=o.message;void 0===s&&(s=ja.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,f.so(new za(s,c)),l.close()}else Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.io(i)}})),d(o,Ea.STAT_EVENT,(function(t){t.stat===Ca.PROXY?Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ca.NOPROXY&&Pa(Mc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){f.no()}),0),f}}]),n}(function(){function e(t){T(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return I(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=Pc(),o=this.ao(e,t);Pa("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return Pa("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Oa("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Da,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Lc[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Uc(){return"undefined"!=typeof document?document:null}function Vc(e){return new ml(e,!0)}var jc=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;T(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return I(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Pa("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),zc=function(){function e(t,n,r,i,a,o,u,s){T(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new jc(t,n)}return I(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=o(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===ja.RESOURCE_EXHAUSTED?(La(n.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===ja.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new za(ja.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(o(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Pa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Pa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),qc=function(e){w(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return I(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fa()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ua(void 0===t||"string"==typeof t),Fo.fromBase64String(t||"")):(Ua(void 0===t||t instanceof Uint8Array),Fo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ja.UNKNOWN:nl(e.code);return new za(t,e.message||"")}(o);n=new ll(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=Sl(e,s.document.name),c=bl(s.document.updateTime),h=s.document.createTime?bl(s.document.createTime):no.min(),f=new lu({mapValue:{fields:s.document.fields}}),d=hu.newFoundDocument(l,c,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new ul(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Sl(e,y.document),g=y.readTime?bl(y.readTime):no.min(),k=hu.newNoDocument(m,g),_=y.removedTargetIds||[];n=new ul([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Sl(e,b.document),E=b.removedTargetIds||[];n=new ul([],E,w,null)}else{if(!("filter"in t))return Fa();t.filter;var C=t.filter;C.targetId;var S=C.count||0,T=new el(S),x=C.targetId;n=new sl(x,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return no.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?no.min():t.readTime?bl(t.readTime):no.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Il(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Uu(r)?{documents:Al(e,r)}:{query:Pl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=kl(e,t.resumeToken):t.snapshotVersion.compareTo(no.min())>0&&(n.readTime=gl(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fa()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Il(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(zc),Bc=function(e){w(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return I(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,k(g(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ua(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Ua(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?bl(e.updateTime):bl(t);return n.isEqual(no.min())&&(n=bl(t)),new Ps(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=bl(e.commitTime);return this.listener.Zo(n,t)}return Ua(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Il(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Rl(t.serializer,e)}))};this.Fo(n)}}]),n}(zc),Hc=function(e){w(n,e);var t=C(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return I(n,[{key:"nu",value:function(){if(this.eu)throw new za(ja.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ja.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new za(ja.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ja.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new za(ja.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return I((function e(){T(this,e)}))}());var Wc=function(){function e(t,n){T(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return I(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(La(t),this.ru=!1):Pa("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),Kc=I((function e(t,n,r,a,u){var s=this;T(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=u,this._u.qr((function(e){r.enqueueAndForget(o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=rh(s),!e.t0){e.next=5;break}return Pa("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=o(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Va(t)).du.add(4),e.next=4,Yc(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Gc(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Wc(r,a)}));function Gc(e){return Qc.apply(this,arguments)}function Qc(){return Qc=o(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rh(t)){e.next=18;break}n=b(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Qc.apply(this,arguments)}function Yc(e){return $c.apply(this,arguments)}function $c(){return $c=o(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),$c.apply(this,arguments)}function Xc(e,t){var n=Va(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),nh(n)?th(n):Ah(n).No()&&Zc(n,t))}function Jc(e,t){var n=Va(e),r=Ah(n);n.fu.delete(t),r.No()&&eh(n,t),0===n.fu.size&&(r.No()?r.$o():rh(n)&&n.mu.set("Unknown"))}function Zc(e,t){e.gu.Ot(t.targetId),Ah(e).jo(t)}function eh(e,t){e.gu.Ot(t),Ah(e).Wo(t)}function th(e){e.gu=new hl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Ah(e).start(),e.mu.ou()}function nh(e){return rh(e)&&!Ah(e).xo()&&e.fu.size>0}function rh(e){return 0===Va(e).du.size}function ih(e){e.gu=void 0}function ah(e){return oh.apply(this,arguments)}function oh(){return oh=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Zc(t,e)}));case 1:case"end":return e.stop()}}),e)}))),oh.apply(this,arguments)}function uh(e,t){return sh.apply(this,arguments)}function sh(){return sh=o(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ih(t),nh(t)?(t.mu.au(n),th(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),sh.apply(this,arguments)}function lh(e,t,n){return ch.apply(this,arguments)}function ch(){return ch=o(i().mark((function e(t,n,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof ll&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=o(i().mark((function e(t,n){var r,a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=b(n.targetIds),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=14;break}if(u=o.value,e.t0=t.fu.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.fu.delete(u),t.gu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Pa("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,hh(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ul?t.gu.Kt(n):n instanceof sl?t.gu.Jt(n):t.gu.zt(n),r.isEqual(no.min())){e.next=29;break}return e.prev=14,e.next=17,kc(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Fo.EMPTY_BYTE_STRING,n.snapshotVersion)),eh(e,t);var r=new Hl(n.target,t,1,n.sequenceNumber);Zc(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Pa("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,hh(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),ch.apply(this,arguments)}function hh(e,t,n){return fh.apply(this,arguments)}function fh(){return fh=o(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ko(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Yc(t);case 5:t.mu.set("Offline"),r||(r=function(){return kc(t.localStore)}),t.asyncQueue.enqueueRetryable(o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Gc(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function dh(e,t){return t().catch((function(n){return hh(e,n,t)}))}function ph(e){return vh.apply(this,arguments)}function vh(){return vh=o(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Va(t),r=Ph(n),a=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!yh(n)){e.next=19;break}return e.prev=3,e.next=6,wc(n.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:a=o.batchId,mh(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,hh(n,e.t0);case 17:e.next=2;break;case 19:gh(n)&&kh(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),vh.apply(this,arguments)}function yh(e){return rh(e)&&e.lu.length<10}function mh(e,t){e.lu.push(t);var n=Ph(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function gh(e){return rh(e)&&!Ph(e).xo()&&e.lu.length>0}function kh(e){Ph(e).start()}function _h(e){return bh.apply(this,arguments)}function bh(){return bh=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ph(t).tu();case 1:case"end":return e.stop()}}),e)}))),bh.apply(this,arguments)}function wh(e){return Eh.apply(this,arguments)}function Eh(){return Eh=o(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ph(t),r=b(t.lu);try{for(r.s();!(a=r.n()).done;)o=a.value,n.Yo(o.mutations)}catch(i){r.e(i)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function Ch(e,t,n){return Sh.apply(this,arguments)}function Sh(){return Sh=o(i().mark((function e(t,n,r){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lu.shift(),o=Js.from(a,n,r),e.next=3,dh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,ph(t);case 5:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Th(e,t){return xh.apply(this,arguments)}function xh(){return xh=o(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ph(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tl(a=n.code)||a===ja.ABORTED){e.next=7;break}return r=t.lu.shift(),Ph(t).Oo(),e.next=5,dh(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ph(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:gh(t)&&kh(t);case 5:case"end":return e.stop()}}),e)}))),xh.apply(this,arguments)}function Ih(e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Va(t)).asyncQueue.verifyOperationInProgress(),Pa("RemoteStore","RemoteStore received new credentials"),a=rh(r),r.du.add(3),e.next=6,Yc(r);case 6:return a&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Gc(r);case 12:case"end":return e.stop()}}),e)}))),Nh.apply(this,arguments)}function Dh(e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=o(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Va(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Gc(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Yc(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Ah(e){return e.yu||(e.yu=function(e,t,n){var r=Va(e);return r.nu(),new qc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:ah.bind(null,e),Zr:uh.bind(null,e),zo:lh.bind(null,e)}),e.wu.push(function(){var t=o(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),nh(e)?th(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:ih(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function Ph(e){return e.pu||(e.pu=function(e,t,n){var r=Va(e);return r.nu(),new Bc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:_h.bind(null,e),Zr:Th.bind(null,e),Xo:wh.bind(null,e),Zo:Ch.bind(null,e)}),e.wu.push(function(){var t=o(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,ph(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Pa("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var Lh=function(){function e(t,n,r,i,a){T(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return I(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new za(ja.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Oh(e,t){if(La("AsyncQueue","".concat(t,": ").concat(e)),ko(e))return new za(ja.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Mh=function(){function e(t){T(this,e),this.comparator=t?function(e,n){return t(e,n)||uo.comparator(e.key,n.key)}:function(e,t){return uo.comparator(e.key,t.key)},this.keyedMap=us(),this.sortedSet=new Do(this.comparator)}return I(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Fh=function(){function e(){T(this,e),this.Iu=new Do(uo.comparator)}return I(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Fa():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Uh=function(){function e(t,n,r,i,a,o,u,s,l){T(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=l}return I(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Mh.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Vh=I((function e(){T(this,e),this.Eu=void 0,this.listeners=[]})),jh=I((function e(){T(this,e),this.queries=new rs((function(e){return Xu(e)}),$u),this.onlineState="Unknown",this.Au=new Set}));function zh(e,t){return qh.apply(this,arguments)}function qh(){return qh=o(i().mark((function e(t,n){var r,a,o,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Va(t),a=n.query,o=!1,(u=r.queries.get(a))||(o=!0,u=new Vh),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:u.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Oh(e.t0,"Initialization of query '".concat(Ju(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,u),u.listeners.push(n),n.Ru(r.onlineState),u.Eu&&n.vu(u.Eu)&&Gh(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),qh.apply(this,arguments)}function Bh(e,t){return Hh.apply(this,arguments)}function Hh(){return Hh=o(i().mark((function e(t,n){var r,a,o,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Va(t),a=n.query,o=!1,(u=r.queries.get(a))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),Hh.apply(this,arguments)}function Wh(e,t){var n,r=Va(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=b(s.listeners);try{for(c.s();!(l=c.n()).done;){l.value.vu(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}s.Eu=o}}}catch(h){a.e(h)}finally{a.f()}i&&Gh(r)}function Kh(e,t,n){var r=Va(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Gh(e){e.Au.forEach((function(e){e.next()}))}var Qh=function(){function e(t,n,r){T(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return I(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Uh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}();var Yh=I((function e(t){T(this,e),this.key=t})),$h=I((function e(t){T(this,e),this.key=t})),Xh=function(){function e(t,n){T(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=ps(),this.mutatedKeys=ps(),this.Ku=ts(t),this.Gu=new Mh(this.Ku)}return I(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Fh,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=Zu(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Wu(c,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Ku(h,s)>0||l&&n.Ku(h,l)<0)&&(u=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(s||l)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fa()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Uh(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Fh,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=ps(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new $h(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Yh(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=ps();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Uh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Jh=I((function e(t,n,r){T(this,e),this.query=t,this.targetId=n,this.view=r})),Zh=I((function e(t){T(this,e),this.key=t,this.ec=!1})),ef=function(){function e(t,n,r,i,a,o){T(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new rs((function(e){return Xu(e)}),$u),this.ic=new Map,this.rc=new Set,this.oc=new Do(uo.comparator),this.uc=new Map,this.cc=new rc,this.ac={},this.hc=new Map,this.lc=Xl.bn(),this.onlineState="Unknown",this.fc=void 0}return I(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function tf(e,t){return nf.apply(this,arguments)}function nf(){return nf=o(i().mark((function e(t,n){var r,a,o,u,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rf(t),!(u=r.sc.get(n))){e.next=6;break}a=u.targetId,r.sharedClientState.addLocalQueryTarget(a),o=u.view.tc(),e.next=15;break;case 6:return e.next=8,Ec(r.localStore,Gu(n));case 8:return s=e.sent,r.isPrimaryClient&&Xc(r.remoteStore,s),l=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,rf(r,n,a,"current"===l,s.resumeToken);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(e,t,n,r,i){return af.apply(this,arguments)}function af(){return af=o(i().mark((function e(t,n,r,a,u){var s,l,c,h,f,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=o(i().mark((function e(t,n,r,a){var o,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.zu(r),e.t0=o.Mi,!e.t0){e.next=6;break}return e.next=5,Tc(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,o)}));case 5:o=e.sent;case 6:return u=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(Ef(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Tc(t.localStore,n,!0);case 3:return s=e.sent,l=new Xh(n,s.Wi),c=l.zu(s.documents),h=ol.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState,u),f=l.applyChanges(c,t.isPrimaryClient,h),Ef(t,r,f.Yu),d=new Jh(n,r,l),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),af.apply(this,arguments)}function of(e,t){return uf.apply(this,arguments)}function uf(){return uf=o(i().mark((function e(t,n){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Va(t),a=r.sc.get(n),!((o=r.ic.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(a.targetId,o.filter((function(e){return!$u(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Cc(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),Jc(r.remoteStore,a.targetId),bf(r,a.targetId)})).catch(yo);case 9:e.next=14;break;case 11:return bf(r,a.targetId),e.next=14,Cc(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),uf.apply(this,arguments)}function sf(e,t,n){return lf.apply(this,arguments)}function lf(){return lf=o(i().mark((function e(t,n,r){var a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Af(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Va(e),a=to.now(),o=t.reduce((function(e,t){return e.add(t.key)}),ps());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=as(),s=ps();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=js(l,n.get(l.key).overlayedDocument);null!=c&&u.push(new Bs(l.key,c,cu(c.value.mapValue),Ls.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ss(n)}}))}(a.localStore,n);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Do(Za)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(a,o.batchId,r),e.next=9,Tf(a,o.changes);case 9:return e.next=11,ph(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=Oh(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),lf.apply(this,arguments)}function cf(e,t){return hf.apply(this,arguments)}function hf(){return hf=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.prev=1,e.next=4,_c(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Ua(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Ua(n.ec):e.removedDocuments.size>0&&(Ua(n.ec),n.ec=!1))})),e.next=8,Tf(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,yo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),hf.apply(this,arguments)}function ff(e,t,n){var r=Va(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Va(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Gh(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function df(e,t,n){return pf.apply(this,arguments)}function pf(){return pf=o(i().mark((function e(t,n,r){var a,o,u,s,l,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Va(t)).sharedClientState.updateQueryState(n,"rejected",r),o=a.uc.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new Do(uo.comparator)).insert(u,hu.newNoDocument(u,no.min())),l=ps().add(u),c=new al(no.min(),new Map,new Po(Za),s,l),e.next=9,cf(a,c);case 9:a.oc=a.oc.remove(u),a.uc.delete(n),Sf(a),e.next=16;break;case 14:return e.next=16,Cc(a.localStore,n,!1).then((function(){return bf(a,n,r)})).catch(yo);case 16:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(e,t){return yf.apply(this,arguments)}function yf(){return yf=o(i().mark((function e(t,n){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),a=n.batch.batchId,e.prev=1,e.next=4,gc(r.localStore,n);case 4:return o=e.sent,_f(r,a,null),kf(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,Tf(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,yo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yf.apply(this,arguments)}function mf(e,t,n){return gf.apply(this,arguments)}function gf(){return gf=o(i().mark((function e(t,n,r){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Va(t),e.prev=1,e.next=4,function(e,t){var n=Va(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ua(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,n);case 4:return o=e.sent,_f(a,n,r),kf(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Tf(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,yo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),gf.apply(this,arguments)}function kf(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function _f(e,t,n){var r=Va(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||wf(e,t)}))}function wf(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Jc(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Sf(e))}function Ef(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Yh?(e.cc.addReference(a.key,t),Cf(e,a)):a instanceof $h?(Pa("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||wf(e,a.key)):Fa()}}catch(o){i.e(o)}finally{i.f()}}function Cf(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Pa("SyncEngine","New document in limbo: "+n),e.rc.add(r),Sf(e))}function Sf(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new uo(io.fromString(t)),r=e.lc.next();e.uc.set(r,new Zh(n)),e.oc=e.oc.insert(n,r),Xc(e.remoteStore,new Hl(Gu(zu(n.path)),r,2,_o.ct))}}function Tf(e,t,n){return xf.apply(this,arguments)}function xf(){return xf=o(i().mark((function e(t,n,r){var a,u,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Va(t),u=[],s=[],l=[],e.t0=a.sc.isEmpty(),e.t0){e.next=9;break}return a.sc.forEach((function(e,t){l.push(a.dc(t,n,r).then((function(e){if((e||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){u.push(e);var n=fc.Di(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(l);case 6:return a.nc.zo(u),e.next=9,function(){var e=o(i().mark((function e(t,n){var r,a,o,u,s,l,c,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return go.forEach(n,(function(t){return go.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return go.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ko(e.t0)){e.next=10;break}throw e.t0;case 10:Pa("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=b(n);try{for(a.s();!(o=a.n()).done;)u=o.value,s=u.targetId,u.fromCache||(l=r.Li.get(s),c=l.snapshotVersion,h=l.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(s,h))}catch(i){a.e(i)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,s);case 9:case"end":return e.stop()}}),e)}))),xf.apply(this,arguments)}function If(e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Va(t)).currentUser.isEqual(n)){e.next=11;break}return Pa("SyncEngine","User change. New user:",n.toKey()),e.next=5,yc(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new za(ja.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,Tf(r,a.Qi);case 11:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}function Df(e,t){var n=Va(e),r=n.uc.get(t);if(r&&r.ec)return ps().add(r.key);var i=ps(),a=n.ic.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.sc.get(s);i=i.unionWith(l.view.Qu)}}catch(c){u.e(c)}finally{u.f()}return i}function Rf(e){var t=Va(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Df.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=df.bind(null,t),t.nc.zo=Wh.bind(null,t.eventManager),t.nc.wc=Kh.bind(null,t.eventManager),t}function Af(e){var t=Va(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mf.bind(null,t),t}var Pf=function(){function e(){T(this,e),this.synchronizeTabs=!1}return I(e,[{key:"initialize",value:function(){var e=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return vc(this.persistence,new dc,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new lc(hc.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Nc}},{key:"terminate",value:function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lf=function(){function e(){T(this,e)}return I(e,[{key:"initialize",value:function(){var e=o(i().mark((function e(t,n){var r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ff(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=If.bind(null,this.syncEngine),e.next=12,Dh(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jh}},{key:"createDatastore",value:function(e){var t,n=Vc(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Fc(t));return function(e,t,n,r){return new Hc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ff(o.syncEngine,e,0)},a=Rc.D()?new Rc:new Dc,new Kc(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ef(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=o(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Va(t),Pa("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Yc(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Of=function(){function e(t){T(this,e),this.observer=t,this.muted=!1}return I(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Mf=function(){function e(t,n,r,a){var u=this;T(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Na.UNAUTHENTICATED,this.clientId=Ja.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa("FirestoreClient","Received user=",t.uid),e.next=3,u.authCredentialListener(t);case 3:u.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Pa("FirestoreClient","Received new app check token=",e),u.appCheckCredentialListener(e,u.user)}))}return I(e,[{key:"getConfiguration",value:function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new za(ja.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(o(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Oh(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ff(e,t){return Uf.apply(this,arguments)}function Uf(){return Uf=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Pa("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,yc(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Uf.apply(this,arguments)}function Vf(e,t){return jf.apply(this,arguments)}function jf(){return jf=o(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,qf(t);case 3:return r=e.sent,Pa("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return Ih(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ih(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}function zf(e){return"FirebaseError"===e.name?e.code===ja.FAILED_PRECONDITION||e.code===ja.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function qf(e){return Bf.apply(this,arguments)}function Bf(){return Bf=o(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Pa("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Ff(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),zf(n=e.t0)){e.next=13;break}throw n;case 13:return Oa("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Ff(t,new Pf);case 16:e.next=21;break;case 18:return Pa("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Ff(t,new Pf);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Bf.apply(this,arguments)}function Hf(e){return Wf.apply(this,arguments)}function Wf(){return Wf=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Pa("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Vf(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Pa("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Vf(t,new Lf);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Kf(e){return Hf(e).then((function(e){return e.syncEngine}))}function Gf(e){return Qf.apply(this,arguments)}function Qf(){return Qf=o(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hf(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=tf.bind(null,n.syncEngine),r.onUnlisten=of.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Qf.apply(this,arguments)}function Yf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new qa;return e.asyncQueue.enqueueAndForget(o(i().mark((function a(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Of({next:function(n){t.enqueueAndForget((function(){return Bh(e,o)})),n.fromCache&&"server"===r.source?i.reject(new za(ja.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Qh(n,a,{includeMetadataChanges:!0,xu:!0});return zh(e,o)},i.next=3,Gf(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),a)})))),r.promise}var $f=new Map;function Xf(e,t,n){if(!n)throw new za(ja.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Jf(e){if(!uo.isDocumentKey(e))throw new za(ja.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zf(e){if(uo.isDocumentKey(e))throw new za(ja.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ed(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Fa()}function td(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new za(ja.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ed(e);throw new za(ja.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var nd=function(){function e(t){var n;if(T(this,e),void 0===t.host){if(void 0!==t.ssl)throw new za(ja.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new za(ja.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new za(ja.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return I(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),rd=function(){function e(t,n,r,i){T(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nd({}),this._settingsFrozen=!1}return I(e,[{key:"app",get:function(){if(!this._app)throw new za(ja.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new za(ja.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ha;switch(e.type){case"firstParty":return new Qa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new za(ja.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$f.get(e);t&&(Pa("ComponentProvider","Removing Datastore"),$f.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function id(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=td(e,rd))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Oa("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Na.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new za(ja.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Na(s)}e._authCredentials=new Wa(new Ba(o,u))}}var ad=function(){function e(t,n,r){T(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return I(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ud(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),od=function(){function e(t,n,r){T(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return I(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ud=function(e){w(n,e);var t=C(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,zu(i)))._path=i,a.type="collection",a}return I(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ad(this.firestore,null,new uo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(od);function sd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fe(e),Xf("collection","path",t),e instanceof rd){var a=io.fromString.apply(io,[t].concat(r));return Zf(a),new ud(e,null,a)}if(!(e instanceof ad||e instanceof ud))throw new za(ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(io.fromString.apply(io,[t].concat(r)));return Zf(o),new ud(e.firestore,null,o)}function ld(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fe(e),1===arguments.length&&(t=Ja.A()),Xf("doc","path",t),e instanceof rd){var a=io.fromString.apply(io,[t].concat(r));return Jf(a),new ad(e,null,new uo(a))}if(!(e instanceof ad||e instanceof ud))throw new za(ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(io.fromString.apply(io,[t].concat(r)));return Jf(o),new ad(e.firestore,e instanceof ud?e.converter:null,new uo(o))}var cd=function(){function e(){var t=this;T(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new jc(this,"async_queue_retry"),this.qc=function(){var e=Uc();e&&Pa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Uc();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return I(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Uc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new qa;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=o(i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ko(e.t0)){e.next=12;break}throw e.t0;case 12:Pa("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw La("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=Lh.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Fa()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=b(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function hd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var fd=function(e){w(n,e);var t=C(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new cd,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return I(n,[{key:"_terminate",value:function(){return this._firestoreClient||pd(this),this._firestoreClient.terminate()}}]),n}(rd);function dd(e){return e._firestoreClient||pd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pd(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Wo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Mf(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}var vd=function(){function e(t){T(this,e),this._byteString=t}return I(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Fo.fromBase64String(t))}catch(t){throw new za(ja.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Fo.fromUint8Array(t))}}]),e}(),yd=function(){function e(){T(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new za(ja.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oo(n)}return I(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var md=I((function e(t){T(this,e),this._methodName=t})),gd=function(){function e(t,n){if(T(this,e),!isFinite(t)||t<-90||t>90)throw new za(ja.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new za(ja.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return I(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Za(this._lat,e._lat)||Za(this._long,e._long)}}]),e}(),kd=/^__.*__$/,_d=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return I(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new qs(e,this.data,t,this.fieldTransforms)}}]),e}(),bd=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return I(e,[{key:"toMutation",value:function(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function wd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fa()}}var Ed=function(){function e(t,n,r,i,a,o){T(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return I(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return Vd(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(wd(this.Yc)&&kd.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),Cd=function(){function e(t,n,r){T(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Vc(t)}return I(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ed({Yc:e,methodName:t,oa:n,path:oo.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Sd(e){var t=e._freezeSettings(),n=Vc(e._databaseId);return new Cd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Td(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);Od("Data must be an object, but it was:",o,r);var u,s,l=Pd(r,o);if(a.merge)u=new Oo(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=b(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=Md(t,c.value,n);if(!o.contains(d))throw new za(ja.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));jd(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}u=new Oo(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new _d(new lu(l),u,s)}var xd=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(md);var Id=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"_toFieldTransform",value:function(e){return new As(e.path,new Cs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(md);function Nd(e,t,n,r){var i=e.ua(1,t,n);Od("Data must be an object, but it was:",i,r);var a=[],o=lu.empty();Io(r,(function(e,r){var u=Ud(t,e,n);r=fe(r);var s=i.na(u);if(r instanceof xd)a.push(u);else{var l=Ad(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new Oo(a);return new bd(o,u,i.fieldTransforms)}function Dd(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[Md(t,r,n)],s=[i];if(a.length%2!=0)throw new za(ja.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(Md(t,a[l])),s.push(a[l+1]);for(var c=[],h=lu.empty(),f=u.length-1;f>=0;--f)if(!jd(c,u[f])){var d=u[f],p=s[f];p=fe(p);var v=o.na(d);if(p instanceof xd)c.push(d);else{var y=Ad(p,v);null!=y&&(c.push(d),h.set(d,y))}}var m=new Oo(c);return new bd(h,m,o.fieldTransforms)}function Rd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ad(n,e.ua(r?4:3,t))}function Ad(e,t){if(Ld(e=fe(e)))return Od("Unsupported field value:",t,e),Pd(e,t);if(e instanceof md)return function(e,t){if(!wd(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=Ad(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=fe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ks(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=to.fromDate(e);return{timestampValue:gl(t.serializer,n)}}if(e instanceof to){var r=new to(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gl(t.serializer,r)}}if(e instanceof gd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vd)return{bytesValue:kl(t.serializer,e._byteString)};if(e instanceof ad){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(ed(e)))}(e,t)}function Pd(e,t){var n={};return No(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Io(e,(function(e,r){var i=Ad(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ld(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof to||e instanceof gd||e instanceof vd||e instanceof ad||e instanceof md)}function Od(e,t,n){if(!Ld(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ed(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function Md(e,t,n){if((t=fe(t))instanceof yd)return t._internalPath;if("string"==typeof t)return Ud(e,t);throw Vd("Field path arguments must be of type string or ",e,!1,void 0,n)}var Fd=new RegExp("[~\\*/\\[\\]]");function Ud(e,t,n){if(t.search(Fd)>=0)throw Vd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return m(yd,S(t.split(".")))._internalPath}catch(r){throw Vd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vd(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new za(ja.INVALID_ARGUMENT,u+e+s)}function jd(e,t){return e.some((function(e){return e.isEqual(t)}))}var zd=function(){function e(t,n,r,i,a){T(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return I(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ad(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new qd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Bd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),qd=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"data",value:function(){return k(g(n.prototype),"data",this).call(this)}}]),n}(zd);function Bd(e,t){return"string"==typeof t?Ud(e,t):t instanceof yd?t._internalPath:t._delegate._internalPath}function Hd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new za(ja.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=I((function e(){T(this,e)})),Kd=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n)}(Wd);function Gd(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Wd&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof $d})).length,n=e.filter((function(e){return e instanceof Qd})).length;if(t>1||t>0&&n>0)throw new za(ja.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=b(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Qd=function(e){w(n,e);var t=C(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return I(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Zd(e._query,t),new od(e.firestore,e.converter,Qu(e._query,t))}},{key:"_parse",value:function(e){var t=Sd(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new za(ja.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Jd(o,a);var s,l=[],c=b(o);try{for(c.s();!(s=c.n()).done;){var h=s.value;l.push(Xd(r,e,h))}}catch(f){c.e(f)}finally{c.f()}u={arrayValue:{values:l}}}else u=Xd(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Jd(o,a),u=Rd(n,"where",o,"in"===a||"not-in"===a);return gu.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kd);function Yd(e,t,n){var r=t,i=Bd("where",e);return Qd._create(i,r,n)}var $d=function(e){w(n,e);var t=C(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return I(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ku.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Zd(r,a),r=Qu(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new od(e.firestore,e.converter,Qu(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Wd);function Xd(e,t,n){if("string"==typeof(n=fe(n))){if(""===n)throw new za(ja.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wu(t)&&-1!==n.indexOf("/"))throw new za(ja.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(io.fromString(n));if(!uo.isDocumentKey(r))throw new za(ja.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tu(e,new uo(r))}if(n instanceof ad)return tu(e,n._key);throw new za(ja.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ed(n),"."))}function Jd(e,t){if(!Array.isArray(e)||0===e.length)throw new za(ja.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zd(e,t){if(t.isInequality()){var n=Hu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new za(ja.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Bu(e);null!==i&&ep(e,r,i)}var a=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new za(ja.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new za(ja.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function ep(e,t,n){if(!n.isEqual(t))throw new za(ja.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tp=function(){function e(){T(this,e)}return I(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fa()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Io(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new gd(jo(e.latitude),jo(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ho(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Vo(e);return new to(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=io.fromString(e);Ua(Bl(n));var r=new Ko(n.get(1),n.get(3)),i=new uo(n.popFirst(5));return r.isEqual(t)||La("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function np(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rp=function(){function e(t,n){T(this,e),this.hasPendingWrites=t,this.fromCache=n}return I(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ip=function(e){w(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return I(n,[{key:"exists",value:function(){return k(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Bd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(zd),ap=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(g(n.prototype),"data",this).call(this,e)}}]),n}(ip),op=function(){function e(t,n,r,i){T(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new rp(i.hasPendingWrites,i.fromCache),this.query=r}return I(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ap(n._firestore,n._userDataWriter,r.key,r,new rp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new za(ja.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ap(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ap(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:up(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function up(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fa()}}var sp=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return I(n,[{key:"convertBytes",value:function(e){return new vd(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ad(this.firestore,null,t)}}]),n}(tp);function lp(e){e=td(e,od);var t=td(e.firestore,fd),n=dd(t),r=new sp(t);return Hd(e._query),Yf(n,e._query).then((function(n){return new op(t,r,e,n)}))}function cp(e,t,n){e=td(e,ad);for(var r=td(e.firestore,fd),i=Sd(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return pp(r,[("string"==typeof(t=fe(t))||t instanceof yd?Dd(i,"updateDoc",e._key,t,n,o):Nd(i,"updateDoc",e._key,t)).toMutation(e._key,Ls.exists(!0))])}function hp(e){return pp(td(e.firestore,fd),[new Ys(e._key,Ls.none())])}function fp(e,t){var n=td(e.firestore,fd),r=ld(e),i=np(e.converter,t);return pp(n,[Td(Sd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ls.exists(!1))]).then((function(){return r}))}function dp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,u,s;e=fe(e);var l={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||hd(n[c])||(l=n[c],c++);var h,f,d,p={includeMetadataChanges:l.includeMetadataChanges};if(hd(n[c])){var v=n[c];n[c]=null===(a=v.next)||void 0===a?void 0:a.bind(v),n[c+1]=null===(u=v.error)||void 0===u?void 0:u.bind(v),n[c+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof ad)f=td(e.firestore,fd),d=zu(e._key.path),h={next:function(t){n[c]&&n[c](vp(f,e,t))},error:n[c+1],complete:n[c+2]};else{var y=td(e,od);f=td(y.firestore,fd),d=y._query;var m=new sp(f);h={next:function(e){n[c]&&n[c](new op(f,m,y,e))},error:n[c+1],complete:n[c+2]},Hd(e._query)}return function(e,t,n,r){var a=new Of(r),u=new Qh(t,a,n);return e.asyncQueue.enqueueAndForget(o(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zh,t.next=3,Gf(e);case 3:return t.t1=t.sent,t.t2=u,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){a.yc(),e.asyncQueue.enqueueAndForget(o(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bh,t.next=3,Gf(e);case 3:return t.t1=t.sent,t.t2=u,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dd(f),d,p,h)}function pp(e,t){return function(e,t){var n=new qa;return e.asyncQueue.enqueueAndForget(o(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=sf,r.next=3,Kf(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dd(e),t)}function vp(e,t,n){var r=n.docs.get(t._key),i=new sp(e);return new ip(e,i,t._key,r,new rp(n.hasPendingWrites,n.fromCache),t.converter)}function yp(){return new Id("serverTimestamp")}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Da=e}(it),Ze(new de("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new fd(new Ka(e.getProvider("auth-internal")),new $a(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new za(ja.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ot(Ia,"3.10.0",e),ot(Ia,"3.10.0","esm2017")}();ot("firebase","9.19.1","app");var mp="@firebase/database",gp="0.14.4",kp="";var _p=function(){function e(t){T(this,e),this.domStorage_=t,this.prefix_="firebase:"}return I(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),te(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ee(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),bp=function(){function e(){T(this,e),this.cache_={},this.isInMemoryStorage=!0}return I(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return re(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),wp=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new _p(t)}}catch(n){}return new bp},Ep=wp("localStorage"),Cp=wp("sessionStorage"),Sp=new Ce("@firebase/database"),Tp=function(){var e=1;return function(){return e++}}(),xp=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,A(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new le;n.update(t);var r=n.digest();return O.encodeByteArray(r)},Ip=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?te(r):r,t+=" "}return t},Np=null,Dp=!0,Rp=function(e,t){A(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Sp.logLevel=me.VERBOSE,Np=Sp.log.bind(Sp),t&&Cp.set("logging_enabled",!0)):"function"===typeof e?Np=e:(Np=null,Cp.remove("logging_enabled"))},Ap=function(){if(!0===Dp&&(Dp=!1,null===Np&&!0===Cp.get("logging_enabled")&&Rp(!0)),Np){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ip.apply(null,t);Np(r)}},Pp=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ap.apply(void 0,[e].concat(n))}},Lp=function(){var e="FIREBASE INTERNAL ERROR: "+Ip.apply(void 0,arguments);Sp.error(e)},Op=function(){var e="FIREBASE FATAL ERROR: ".concat(Ip.apply(void 0,arguments));throw Sp.error(e),new Error(e)},Mp=function(){var e="FIREBASE WARNING: "+Ip.apply(void 0,arguments);Sp.warn(e)},Fp=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Up="[MIN_NAME]",Vp="[MAX_NAME]",jp=function(e,t){if(e===t)return 0;if(e===Up||t===Vp)return-1;if(t===Up||e===Vp)return 1;var n=Qp(e),r=Qp(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},zp=function(e,t){return e===t?0:e<t?-1:1},qp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+te(t))},Bp=function e(t){if("object"!==typeof t||null===t)return te(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=te(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Hp=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Wp(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Kp=function(e){A(!Fp(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var Gp=new RegExp("^-?(0*)\\d{1,10}$"),Qp=function(e){if(Gp.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Yp=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Mp("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$p=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Xp=function(){function e(t,n){var r=this;T(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return I(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Mp('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Jp=function(){function e(t,n,r){var i=this;T(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return I(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ap("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mp(e)}}]),e}(),Zp=function(){function e(t){T(this,e),this.accessToken=t}return I(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Zp.OWNER="owner";var ev="5",tv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nv="ac",rv="websocket",iv="long_polling",av=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];T(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ep.get("host:"+t)||this._host}return I(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ep.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ov(e,t,n){var r;if(A("string"===typeof t,"typeof type must == string"),A("object"===typeof n,"typeof params must == object"),t===rv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==iv)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Wp(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var uv=function(){function e(){T(this,e),this.counters_={}}return I(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;re(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return j(this.counters_)}}]),e}(),sv={},lv={};function cv(e){var t=e.toString();return sv[t]||(sv[t]=new uv),sv[t]}var hv=function(){function e(t){T(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return I(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Yp((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),fv="start",dv=function(){function e(t,n,r,i,a,o,u){var s=this;T(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pp(t),this.stats_=cv(n),this.urlFn=function(e){return s.appCheckToken&&(e[nv]=s.appCheckToken),ov(n,iv,e)}}return I(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Y()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new pv((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===fv)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[fv]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ev,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[nv]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&tv.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=F(t),r=Hp(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Y()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=te(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Y()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),pv=function(){function e(t,n,r,i){if(T(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Y())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Tp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Ap("frame writing exception"),u.stack&&Ap(u.stack),Ap(u)}}}return I(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Y()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ap("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ap("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),vv=null;"undefined"!==typeof MozWebSocket?vv=MozWebSocket:"undefined"!==typeof WebSocket&&(vv=WebSocket);var yv=function(){function e(t,n,r,i,a,o,u){T(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pp(this.connId),this.stats_=cv(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return I(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ep.set("previous_websocket_failure",!0);try{var r;if(Y()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(ev,"/").concat(kp,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/ma-soi-homemade",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new vv(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ep.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ee(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(A(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Hp(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ev,!Y()&&"undefined"!==typeof location&&location.hostname&&tv.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[nv]=r),i&&(a.p=i),ov(e,rv,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==vv&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ep.isInMemoryStorage||!0===Ep.get("previous_websocket_failure")}}]),e}();yv.responsesRequiredToBeHealthy=2,yv.healthyTimeout=3e4;var mv=function(){function e(t){T(this,e),this.initTransports_(t)}return I(e,[{key:"initTransports_",value:function(t){var n=yv&&yv.isAvailable(),r=n&&!yv.previouslyFailed();if(t.webSocketOnly&&(n||Mp("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yv];else{var i,a=this.transports_=[],o=b(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[dv,yv]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();mv.globalTransportInitialized_=!1;var gv=function(){function e(t,n,r,i,a,o,u,s,l,c){T(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pp("c:"+this.id+":"),this.transportManager_=new mv(n),this.log_("Connection created"),this.start_()}return I(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=$p((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=qp("t",e),n=qp("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=qp("t",e),n=qp("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=qp("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Lp("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lp("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ev!==n&&Mp("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$p((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$p((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ep.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),kv=function(){function e(){T(this,e)}return I(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),_v=function(){function e(t){T(this,e),this.allowedEvents_=t,this.listeners_={},A(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return I(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=S(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){A(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),bv=function(e){w(n,e);var t=C(n);function n(){var e;return T(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Q()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return I(n,[{key:"getInitialEvent",value:function(e){return A("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(_v),wv=32,Ev=768,Cv=function(){function e(t,n){if(T(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return I(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Sv(){return new Cv("")}function Tv(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function xv(e){return e.pieces_.length-e.pieceNum_}function Iv(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Cv(e.pieces_,t)}function Nv(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Dv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Rv(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Cv(t,0)}function Av(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Cv)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Cv(n,0)}function Pv(e){return e.pieceNum_>=e.pieces_.length}function Lv(e,t){var n=Tv(e),r=Tv(t);if(null===n)return t;if(n===r)return Lv(Iv(e),Iv(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ov(e,t){if(xv(e)!==xv(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Mv(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(xv(e)>xv(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Fv=I((function e(t,n){T(this,e),this.errorPrefix_=n,this.parts_=Dv(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=he(this.parts_[r]);Uv(this)}));function Uv(e){if(e.byteLength_>Ev)throw new Error(e.errorPrefix_+"has a key path longer than "+Ev+" bytes ("+e.byteLength_+").");if(e.parts_.length>wv)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wv+") or object contains a cycle "+Vv(e))}function Vv(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var jv=function(e){w(n,e);var t=C(n);function n(){var e,r,i;return T(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return I(n,[{key:"getInitialEvent",value:function(e){return A("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(_v),zv=1e3,qv=function(e){w(n,e);var t=C(n);function n(e,r,i,a,o,u,s,l){var c;if(T(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=u,c.appCheckTokenProvider_=s,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Pp("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=zv,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!Y())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return jv.getInstance().on("visible",c.onVisible_,E(c)),-1===e.host.indexOf("fblocal")&&bv.getInstance().on("online",c.onOnline_,E(c)),c}return I(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(te(i)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new K,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ne(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ne(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+te(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Lp("Unrecognized action received from server: "+te(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zv),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=o(i().mark((function e(){var t,r,a,o,u,s,c,h,f,d,p,v,y,m,g=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,u=this.lastSessionId,s=!1,c=null,h=function(){c?c.close():(s=!0,a())},f=function(e){A(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:h,sendRequest:f},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=l(p,2),y=v[0],m=v[1],s?Ap("getToken() completed but was canceled"):(Ap("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,c=new gv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,a,(function(e){Mp(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),u)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Mp(e.t0),h());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ap("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ap("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ae(this.interruptReasons_)&&(this.reconnectDelay_=zv,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Bp(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Cv(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ap("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ap("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=b(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=b(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Y()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+kp.replace(/\./g,"-")]=1,Q()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=bv.getInstance().currentlyOnline();return ae(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&re(e,"w")){var n=ie(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Mp("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(kv);qv.nextPersistentConnectionId_=0,qv.nextConnectionId_=0;var Bv,Hv=function(){function e(t,n){T(this,e),this.name=t,this.node=n}return I(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Wv=function(){function e(){T(this,e)}return I(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Hv(Up,e),r=new Hv(Up,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Hv.MIN}}]),e}(),Kv=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"compare",value:function(e,t){return jp(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw P("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Hv.MIN}},{key:"maxPost",value:function(){return new Hv(Vp,Bv)}},{key:"makePost",value:function(e,t){return A("string"===typeof e,"KeyIndex indexValue must always be a string."),new Hv(e,Bv)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Bv},set:function(e){Bv=e}}]),n}(Wv),Gv=new Kv,Qv=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;T(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return I(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Yv=function(){function e(t,n,r,i,a){T(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Jv.EMPTY_NODE,this.right=null!=a?a:Jv.EMPTY_NODE}return I(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Jv.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Jv.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Yv.RED=!0,Yv.BLACK=!1;var $v,Xv=function(){function e(){T(this,e)}return I(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Yv(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Jv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;T(this,e),this.comparator_=t,this.root_=n}return I(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Yv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Yv.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Qv(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Qv(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Qv(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Qv(this.root_,null,this.comparator_,!0,e)}}]),e}();function Zv(e,t){return jp(e.name,t.name)}function ey(e,t){return jp(e,t)}Jv.EMPTY_NODE=new Xv;var ty,ny,ry,iy=function(e){return"number"===typeof e?"number:"+Kp(e):"string:"+e},ay=function(e){if(e.isLeafNode()){var t=e.val();A("string"===typeof t||"number"===typeof t||"object"===typeof t&&re(t,".sv"),"Priority must be a string or number.")}else A(e===$v||e.isEmpty(),"priority of unexpected type.");A(e===$v||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},oy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;T(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,A(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ay(this.priorityNode_)}return I(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Pv(t)?this:".priority"===Tv(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Tv(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(A(".priority"!==r||1===xv(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Iv(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+iy(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Kp(this.value_):this.value_,this.lazyHash_=xp(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(A(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return A(i>=0,"Unknown leaf type: "+n),A(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return ty},set:function(e){ty=e}}]),e}();oy.VALUE_TYPE_ORDER=["object","boolean","number","string"];var uy,sy,ly=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?jp(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Hv.MIN}},{key:"maxPost",value:function(){return new Hv(Vp,new oy("[PRIORITY-POST]",ry))}},{key:"makePost",value:function(e,t){var n=ny(e);return new Hv(t,new oy("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Wv),cy=new ly,hy=Math.log(2),fy=function(){function e(t){T(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/hy,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return I(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),dy=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Yv(o,a.node,Yv.BLACK,null,null);var s=parseInt(u/2,10)+r,l=t(r,s),c=t(s+1,i);return a=e[s],o=n?n(a):a,new Yv(o,a.node,Yv.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var l=i(a+1,u),c=e[a],h=n?n(c):c;s(new Yv(h,c.node,r,null,l))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?u(h,Yv.BLACK):(u(h,Yv.BLACK),u(h,Yv.RED))}return a}(new fy(e.length));return new Jv(r||t,a)},py={},vy=function(){function e(t,n){T(this,e),this.indexes_=t,this.indexSet_=n}return I(e,[{key:"get",value:function(e){var t=ie(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Jv?t:null}},{key:"hasIndex",value:function(e){return re(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){A(t!==Gv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Hv.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?dy(i,t.getCompare()):py;var s=t.toString(),l=Object.assign({},this.indexSet_);l[s]=t;var c=Object.assign({},this.indexes_);return c[s]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(oe(this.indexes_,(function(e,i){var a=ie(r.indexSet_,i);if(A(a,"Missing index implementation for "+i),e===py){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Hv.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),dy(o,a.getCompare())}return py}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Hv(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(oe(this.indexes_,(function(e){if(e===py)return e;var r=n.get(t.name);return r?e.remove(new Hv(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return A(py&&cy,"ChildrenNode.ts has not been loaded"),uy=uy||new e({".priority":py},{".priority":cy})}}]),e}(),yy=function(){function e(t,n,r){T(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ay(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return I(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||sy}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?sy:t}},{key:"getChild",value:function(e){var t=Tv(e);return null===t?this:this.getImmediateChild(t).getChild(Iv(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(A(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Hv(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?sy:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Tv(e);if(null===n)return t;A(".priority"!==Tv(e)||1===xv(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Iv(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(cy,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+iy(this.getPriority().val())+":"),this.forEachChild(cy,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":xp(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Hv(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Hv(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Hv(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Hv.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Hv.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===my?-1:0}},{key:"withIndex",value:function(t){if(t===Gv||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Gv||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(cy),r=t.getIterator(cy),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Gv?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return sy||(sy=new e(new Jv(ey),null,vy.Default))}}]),e}();yy.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var my=new(function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.call(this,new Jv(ey),yy.EMPTY_NODE,vy.Default)}return I(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return yy.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(yy));Object.defineProperties(Hv,{MIN:{value:new Hv(Up,yy.EMPTY_NODE)},MAX:{value:new Hv(Vp,my)}}),Kv.__EMPTY_NODE=yy.EMPTY_NODE,oy.__childrenNodeConstructor=yy,$v=my,function(e){ry=e}(my);var gy=!0;function ky(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return yy.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),A(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new oy(e,ky(t));if(e instanceof Array||!gy){var n=yy.EMPTY_NODE;return Wp(e,(function(t,r){if(re(e,t)&&"."!==t.substring(0,1)){var i=ky(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(ky(t))}var r=[],i=!1;if(Wp(e,(function(e,t){if("."!==e.substring(0,1)){var n=ky(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Hv(e,n)))}})),0===r.length)return yy.EMPTY_NODE;var a=dy(r,Zv,(function(e){return e.name}),ey);if(i){var o=dy(r,cy.getCompare());return new yy(a,ky(t),new vy({".priority":o},{".priority":cy}))}return new yy(a,ky(t),vy.Default)}!function(e){ny=e}(ky);var _y=function(e){w(n,e);var t=C(n);function n(e){var r;return T(this,n),(r=t.call(this)).indexPath_=e,A(!Pv(e)&&".priority"!==Tv(e),"Can't create PathIndex with empty path or .priority key"),r}return I(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?jp(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=ky(e),r=yy.EMPTY_NODE.updateChild(this.indexPath_,n);return new Hv(t,r)}},{key:"maxPost",value:function(){var e=yy.EMPTY_NODE.updateChild(this.indexPath_,my);return new Hv(Vp,e)}},{key:"toString",value:function(){return Dv(this.indexPath_,0).join("/")}}]),n}(Wv),by=function(e){w(n,e);var t=C(n);function n(){return T(this,n),t.apply(this,arguments)}return I(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?jp(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Hv.MIN}},{key:"maxPost",value:function(){return Hv.MAX}},{key:"makePost",value:function(e,t){var n=ky(e);return new Hv(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Wv),wy=new by;function Ey(e){return{type:"value",snapshotNode:e}}function Cy(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Sy(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ty(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var xy=function(){function e(){T(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cy}return I(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Up}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vp}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===cy}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Iy(e){var t,n={};if(e.isDefault())return n;if(e.index_===cy?t="$priority":e.index_===wy?t="$value":e.index_===Gv?t="$key":(A(e.index_ instanceof _y,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=te(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=te(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+te(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=te(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+te(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Ny(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cy&&(t.i=e.index_.toString()),t}var Dy=function(e){w(n,e);var t=C(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Pp("p:rest:"),o.listens_={},o}return I(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var l=Iy(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ie(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Iy(e._queryParams),r=e._path.toString(),i=new K;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ee(c.responseText)}catch(n){Mp("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Mp("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(kv),Ry=function(){function e(){T(this,e),this.rootNode_=yy.EMPTY_NODE}return I(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Ay(){return{value:null,children:new Map}}function Py(e,t,n){if(Pv(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Tv(t);e.children.has(r)||e.children.set(r,Ay()),Py(e.children.get(r),t=Iv(t),n)}}function Ly(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ly(r,new Cv(t.toString()+"/"+e),n)}))}var Oy,My=function(){function e(t){T(this,e),this.collection_=t,this.last_=null}return I(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wp(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Fy=function(){function e(t,n){T(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new My(t);var r=1e4+2e4*Math.random();$p(this.reportStats_.bind(this),Math.floor(r))}return I(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Wp(t,(function(t,i){i>0&&re(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),$p(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Uy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Oy||(Oy={}));var Vy,jy=function(){function e(t,n,r){T(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Oy.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return I(e,[{key:"operationForChild",value:function(t){if(Pv(this.path)){if(null!=this.affectedTree.value)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Cv(t));return new e(Sv(),n,this.revert)}return A(Tv(this.path)===t,"operationForChild called for unrelated child."),new e(Iv(this.path),this.affectedTree,this.revert)}}]),e}(),zy=function(){function e(t,n,r){T(this,e),this.source=t,this.path=n,this.snap=r,this.type=Oy.OVERWRITE}return I(e,[{key:"operationForChild",value:function(t){return Pv(this.path)?new e(this.source,Sv(),this.snap.getImmediateChild(t)):new e(this.source,Iv(this.path),this.snap)}}]),e}(),qy=function(){function e(t,n,r){T(this,e),this.source=t,this.path=n,this.children=r,this.type=Oy.MERGE}return I(e,[{key:"operationForChild",value:function(t){if(Pv(this.path)){var n=this.children.subtree(new Cv(t));return n.isEmpty()?null:n.value?new zy(this.source,Sv(),n.value):new e(this.source,Sv(),n)}return A(Tv(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Iv(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),By=function(){function e(t,n,r){T(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return I(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Pv(e))return this.isFullyInitialized()&&!this.filtered_;var t=Tv(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Hy(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw P("Should only compare child_ events.");var r=new Hv(t.childName,t.snapshotNode),i=new Hv(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Wy(e,t){return{eventCache:e,serverCache:t}}function Ky(e,t,n,r){return Wy(new By(t,n,r),e.serverCache)}function Gy(e,t,n,r){return Wy(e.eventCache,new By(t,n,r))}function Qy(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Yy(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var $y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Vy||(Vy=new Jv(zp)),Vy);T(this,e),this.value=t,this.children=n}return I(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Sv(),value:this.value};if(Pv(e))return null;var n=Tv(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Iv(e),t);return null!=i?{path:Av(new Cv(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Pv(t))return this;var n=Tv(t),r=this.children.get(n);return null!==r?r.subtree(Iv(t)):new e(null)}},{key:"set",value:function(t,n){if(Pv(t))return new e(n,this.children);var r=Tv(t),i=(this.children.get(r)||new e(null)).set(Iv(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Pv(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Tv(t),r=this.children.get(n);if(r){var i,a=r.remove(Iv(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Pv(e))return this.value;var t=Tv(e),n=this.children.get(t);return n?n.get(Iv(e)):null}},{key:"setTree",value:function(t,n){if(Pv(t))return n;var r,i=Tv(t),a=(this.children.get(i)||new e(null)).setTree(Iv(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Sv(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Av(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Sv(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Pv(e))return null;var i=Tv(e),a=this.children.get(i);return a?a.findOnPath_(Iv(e),Av(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Sv(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Pv(t))return this;this.value&&r(n,this.value);var i=Tv(t),a=this.children.get(i);return a?a.foreachOnPath_(Iv(t),Av(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Sv(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Av(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Wp(t,(function(e,t){n=n.set(new Cv(e),t)})),n}}]),e}(),Xy=function(){function e(t){T(this,e),this.writeTree_=t}return I(e,null,[{key:"empty",value:function(){return new e(new $y(null))}}]),e}();function Jy(e,t,n){if(Pv(t))return new Xy(new $y(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Lv(i,t);return a=a.updateChild(o,n),new Xy(e.writeTree_.set(i,a))}var u=new $y(n),s=e.writeTree_.setTree(t,u);return new Xy(s)}function Zy(e,t,n){var r=e;return Wp(n,(function(e,n){r=Jy(r,Av(t,e),n)})),r}function em(e,t){if(Pv(t))return Xy.empty();var n=e.writeTree_.setTree(t,new $y(null));return new Xy(n)}function tm(e,t){return null!=nm(e,t)}function nm(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Lv(n.path,t)):null}function rm(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cy,(function(e,n){t.push(new Hv(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Hv(e,n.value))})),t}function im(e,t){if(Pv(t))return e;var n=nm(e,t);return new Xy(null!=n?new $y(n):e.writeTree_.subtree(t))}function am(e){return e.writeTree_.isEmpty()}function om(e,t){return um(Sv(),e.writeTree_,t)}function um(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(A(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=um(Av(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Av(e,".priority"),r)),n}function sm(e,t){return bm(t,e)}function lm(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));A(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&cm(u,r.path)?i=!1:Mv(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=fm(e.allWrites,hm,Sv()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=em(e.visibleWrites,r.path):Wp(r.children,(function(t){e.visibleWrites=em(e.visibleWrites,Av(r.path,t))}));return!0}return!1}function cm(e,t){if(e.snap)return Mv(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Mv(Av(e.path,n),t))return!0;return!1}function hm(e){return e.visible}function fm(e,t,n){for(var r=Xy.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Mv(n,o)?r=Jy(r,u=Lv(n,o),a.snap):Mv(o,n)&&(u=Lv(o,n),r=Jy(r,Sv(),a.snap.getChild(u)));else{if(!a.children)throw P("WriteRecord should have .snap or .children");if(Mv(n,o))r=Zy(r,u=Lv(n,o),a.children);else if(Mv(o,n))if(Pv(u=Lv(o,n)))r=Zy(r,Sv(),a.children);else{var s=ie(a.children,Tv(u));if(s){var l=s.getChild(Iv(u));r=Jy(r,Sv(),l)}}}}}return r}function dm(e,t,n,r,i){if(r||i){var a=im(e.visibleWrites,t);if(!i&&am(a))return n;if(i||null!=n||tm(a,Sv())){return om(fm(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Mv(e.path,t)||Mv(t,e.path))}),t),n||yy.EMPTY_NODE)}return null}var o=nm(e.visibleWrites,t);if(null!=o)return o;var u=im(e.visibleWrites,t);return am(u)?n:null!=n||tm(u,Sv())?om(u,n||yy.EMPTY_NODE):null}function pm(e,t,n,r){return dm(e.writeTree,e.treePath,t,n,r)}function vm(e,t){return function(e,t,n){var r=yy.EMPTY_NODE,i=nm(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(cy,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=im(e.visibleWrites,t);return n.forEachChild(cy,(function(e,t){var n=om(im(a,new Cv(e)),t);r=r.updateImmediateChild(e,n)})),rm(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return rm(im(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ym(e,t,n,r){return function(e,t,n,r,i){A(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Av(t,n);if(tm(e.visibleWrites,a))return null;var o=im(e.visibleWrites,a);return am(o)?i.getChild(n):om(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function mm(e,t){return function(e,t){return nm(e.visibleWrites,t)}(e.writeTree,Av(e.treePath,t))}function gm(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=im(e.visibleWrites,t),l=nm(s,Sv());if(null!=l)u=l;else{if(null==n)return[];u=om(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function km(e,t,n){return function(e,t,n,r){var i=Av(t,n),a=nm(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?om(im(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function _m(e,t){return bm(Av(e.treePath,t),e.writeTree)}function bm(e,t){return{treePath:e,writeTree:t}}var wm=function(){function e(){T(this,e),this.changeMap=new Map}return I(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;A("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),A(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ty(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Sy(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Cy(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw P("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ty(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Em=new(function(){function e(){T(this,e)}return I(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Cm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;T(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return I(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new By(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return km(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yy(this.viewCache_),i=gm(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Sm(e,t,n,r,i){var a,o,u=new wm;if(n.type===Oy.OVERWRITE){var s=n;s.source.fromUser?a=Im(e,t,s.path,s.snap,r,i,u):(A(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Pv(s.path),a=xm(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Oy.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var l=Av(n,r);Nm(t,Tv(l))&&(u=Im(e,u,l,s,i,a,o))})),r.foreach((function(r,s){var l=Av(n,r);Nm(t,Tv(l))||(u=Im(e,u,l,s,i,a,o))})),u}(e,t,l.path,l.children,r,i,u):(A(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Rm(e,t,l.path,l.children,r,i,o,u))}else if(n.type===Oy.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=mm(r,n))return t;var u,s=new Cm(r,t,i),l=t.eventCache.getNode();if(Pv(n)||".priority"===Tv(n)){var c;if(t.serverCache.isFullyInitialized())c=pm(r,Yy(t));else{var h=t.serverCache.getNode();A(h instanceof yy,"serverChildren would be complete if leaf node"),c=vm(r,h)}u=e.filter.updateFullNode(l,c,a)}else{var f=Tv(n),d=km(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(l,f,d,Iv(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,yy.EMPTY_NODE,Iv(n),s,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=pm(r,Yy(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=mm(r,Sv()),Ky(t,u,o,e.filter.filtersNodes())}(e,t,c.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=mm(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Pv(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return xm(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Pv(n)){var l=new $y(null);return s.getNode().forEachChild(Gv,(function(e,t){l=l.set(new Cv(e),t)})),Rm(e,t,n,l,i,a,u,o)}return t}var c=new $y(null);return r.foreach((function(e,t){var r=Av(n,e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))})),Rm(e,t,n,c,i,a,u,o)}(e,t,c.path,c.affectedTree,r,i,u)}else{if(n.type!==Oy.LISTEN_COMPLETE)throw P("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Gy(t,a.getNode(),a.isFullyInitialized()||Pv(n),a.isFiltered());return Tm(e,o,n,r,Em,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Qy(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ey(Qy(t)))}}(t,a,h),{viewCache:a,changes:h}}function Tm(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=mm(r,n))return t;if(Pv(n))if(A(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Yy(t),c=vm(r,l instanceof yy?l:yy.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=pm(r,Yy(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Tv(n);if(".priority"===f){A(1===xv(n),"Can't have a priority with additional path components");var d=s.getNode(),p=ym(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=Iv(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=ym(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=km(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return Ky(t,o,s.isFullyInitialized()||Pv(n),e.filter.filtersNodes())}function xm(e,t,n,r,i,a,o,u){var s,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Pv(n))s=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);s=c.updateFullNode(l.getNode(),h,null)}else{var f=Tv(n);if(!l.isCompleteForPath(n)&&xv(n)>1)return t;var d=Iv(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,Em,null)}var v=Gy(t,s,l.isFullyInitialized()||Pv(n),c.filtersNodes());return Tm(e,v,n,i,new Cm(i,v,a),u)}function Im(e,t,n,r,i,a,o){var u,s,l=t.eventCache,c=new Cm(i,t,a);if(Pv(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Ky(t,s,!0,e.filter.filtersNodes());else{var h=Tv(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Ky(t,s,l.isFullyInitialized(),l.isFiltered());else{var f,d=Iv(n),p=l.getNode().getImmediateChild(h);if(Pv(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===Nv(d)&&v.getChild(Rv(d)).isEmpty()?v:v.updateChild(d,r):yy.EMPTY_NODE}if(p.equals(f))u=t;else u=Ky(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Nm(e,t){return e.eventCache.isCompleteForChild(t)}function Dm(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Rm(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,l=t;s=Pv(n)?r:new $y(null).setTree(n,r);var c=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var s=Dm(0,t.serverCache.getNode().getImmediateChild(n),r);l=xm(e,l,new Cv(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!s){var h=Dm(0,t.serverCache.getNode().getImmediateChild(n),r);l=xm(e,l,new Cv(n),h,i,a,o,u)}})),l}var Am;function Pm(e,t){var n=Yy(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Pv(t)&&!n.getImmediateChild(Tv(t)).isEmpty())?n.getChild(t):null}function Lm(e,t,n,r){t.type===Oy.MERGE&&null!==t.source.queryId&&(A(Yy(e.viewCache_),"We should always have a full cache before handling merges"),A(Qy(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Sm(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,A(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),A(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),A(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Om(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Om(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Hy(e,i,"child_removed",t,r,n),Hy(e,i,"child_added",t,r,n),Hy(e,i,"child_moved",a,r,n),Hy(e,i,"child_changed",t,r,n),Hy(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Mm;function Fm(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return A(null!=a,"SyncTree gave us an op for an invalid query."),Lm(a,t,n,r)}var o,u=[],s=b(e.views.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u=u.concat(Lm(l,t,n,r))}}catch(c){s.e(c)}finally{s.f()}return u}function Um(e,t){var n,r=null,i=b(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Pm(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Vm=I((function e(t){T(this,e),this.listenProvider_=t,this.syncPointTree_=new $y(null),this.pendingWriteTree_={visibleWrites:Xy.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function jm(e,t,n,r,i){return function(e,t,n,r,i){A(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Jy(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Wm(e,new zy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(lm(e.pendingWriteTree_,t)){var i=new $y(null);return null!=r.snap?i=i.set(Sv(),!0):Wp(r.children,(function(e){i=i.set(new Cv(e),!0)})),Wm(e,new jy(r.path,i,n))}return[]}function qm(e,t,n){return Wm(e,new zy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Bm(e,t,n,r){var i=Qm(e,r);if(null!=i){var a=Ym(i),o=a.path,u=a.queryId,s=Lv(o,t);return $m(e,o,new zy(Uy(u),s,n))}return[]}function Hm(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Um(n,Lv(e,t));if(r)return r}));return dm(r,t,i,n,!0)}function Wm(e,t){return Km(t,e.syncPointTree_,null,sm(e.pendingWriteTree_,Sv()))}function Km(e,t,n,r){if(Pv(e.path))return Gm(e,t,n,r);var i=t.get(Sv());null==n&&null!=i&&(n=Um(i,Sv()));var a=[],o=Tv(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var l=n?n.getImmediateChild(o):null,c=_m(r,o);a=a.concat(Km(u,s,l,c))}return i&&(a=a.concat(Fm(i,e,r,n))),a}function Gm(e,t,n,r){var i=t.get(Sv());null==n&&null!=i&&(n=Um(i,Sv()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=_m(r,t),s=e.operationForChild(t);s&&(a=a.concat(Gm(s,i,o,u)))})),i&&(a=a.concat(Fm(i,e,r,n))),a}function Qm(e,t){return e.tagToQueryMap.get(t)}function Ym(e){var t=e.indexOf("$");return A(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Cv(e.substr(0,t))}}function $m(e,t,n){var r=e.syncPointTree_.get(t);return A(r,"Missing sync point for query tag that we're tracking"),Fm(r,n,sm(e.pendingWriteTree_,t),null)}var Xm=function(){function e(t){T(this,e),this.node_=t}return I(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Jm=function(){function e(t,n){T(this,e),this.syncTree_=t,this.path_=n}return I(e,[{key:"getImmediateChild",value:function(t){var n=Av(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Hm(this.syncTree_,this.path_)}}]),e}(),Zm=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},eg=function(e,t,n){return e&&"object"===typeof e?(A(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?tg(e[".sv"],t,n):"object"===typeof e[".sv"]?ng(e[".sv"],t):void A(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},tg=function(e,t,n){if("timestamp"===e)return n.timestamp;A(!1,"Unexpected server value: "+e)},ng=function(e,t,n){e.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&A(!1,"Unexpected increment value: "+r);var i=t.node();if(A(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},rg=function(e,t,n,r){return ag(t,new Jm(n,e),r)},ig=function(e,t,n){return ag(e,new Xm(t),n)};function ag(e,t,n){var r,i=e.getPriority().val(),a=eg(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=eg(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new oy(u,ky(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new oy(a))),s.forEachChild(cy,(function(e,i){var a=ag(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var og=I((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};T(this,e),this.name=t,this.parent=n,this.node=r}));function ug(e,t){for(var n=t instanceof Cv?t:new Cv(t),r=e,i=Tv(n);null!==i;){var a=ie(r.node.children,i)||{children:{},childCount:0};r=new og(i,r,a),i=Tv(n=Iv(n))}return r}function sg(e){return e.node.value}function lg(e,t){e.node.value=t,pg(e)}function cg(e){return e.node.childCount>0}function hg(e,t){Wp(e.node.children,(function(n,r){t(new og(n,e,r))}))}function fg(e,t,n,r){n&&!r&&t(e),hg(e,(function(e){fg(e,t,!0,r)})),n&&r&&t(e)}function dg(e){return new Cv(null===e.parent?e.name:dg(e.parent)+"/"+e.name)}function pg(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===sg(e)&&!cg(e)}(n),i=re(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,pg(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,pg(e))}(e.parent,e.name,e)}var vg=/[\[\].#$\/\u0000-\u001F\u007F]/,yg=/[\[\].#$\u0000-\u001F\u007F]/,mg=10485760,gg=function(e){return"string"===typeof e&&0!==e.length&&!vg.test(e)},kg=function(e){return"string"===typeof e&&0!==e.length&&!yg.test(e)},_g=function e(t,n,r){var i=r instanceof Cv?new Fv(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Vv(i));if("function"===typeof n)throw new Error(t+"contains a function "+Vv(i)+" with contents = "+n.toString());if(Fp(n))throw new Error(t+"contains "+n.toString()+" "+Vv(i));if("string"===typeof n&&n.length>mg/3&&he(n)>mg)throw new Error(t+"contains a string greater than "+mg+" utf8 bytes "+Vv(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Wp(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!gg(n)))throw new Error(t+" contains an invalid key ("+n+") "+Vv(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=he(s),Uv(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=he(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Vv(i)+" in addition to actual children.")}},bg=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!gg(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),kg(e)}(n))throw new Error(ce(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},wg=I((function e(){T(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Eg(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ov(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Cg(e,t,n){Eg(e,n),Sg(e,(function(e){return Mv(e,t)||Mv(t,e)}))}function Sg(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Tg(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Tg(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Np&&Ap("event: "+n.toString()),Yp(r)}}}var xg="repo_interrupt",Ig=25,Ng=function(){function e(t,n,r,i){T(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ay(),this.transactionQueueTree_=new og,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return I(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Dg(e,t,n){if(e.stats_=cv(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Dy(e.repoInfo_,(function(t,n,r,i){Pg(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Lg(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new qv(e.repoInfo_,t,(function(t,n,r,i){Pg(e,t,n,r,i)}),(function(t){Lg(e,t)}),(function(t){!function(e,t){Wp(t,(function(t,n){Og(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return lv[n]||(lv[n]=t()),lv[n]}(e.repoInfo_,(function(){return new Fy(e.stats_,e.server_)})),e.infoData_=new Ry,e.infoSyncTree_=new Vm({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=qm(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Og(e,"connected",!1),e.serverSyncTree_=new Vm({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Cg(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Rg(e){var t=e.infoData_.getNode(new Cv(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ag(e){return Zm({timestamp:Rg(e)})}function Pg(e,t,n,r,i){e.dataUpdateCount++;var a=new Cv(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=oe(n,(function(e){return ky(e)}));o=function(e,t,n,r){var i=Qm(e,r);if(i){var a=Ym(i),o=a.path,u=a.queryId,s=Lv(o,t),l=$y.fromObject(n);return $m(e,o,new qy(Uy(u),s,l))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=ky(n);o=Bm(e.serverSyncTree_,a,s,i)}else if(r){var l=oe(n,(function(e){return ky(e)}));o=function(e,t,n){var r=$y.fromObject(n);return Wm(e,new qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=ky(n);o=qm(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=zg(e,a)),Cg(e.eventQueue_,h,o)}function Lg(e,t){Og(e,"connected",t),!1===t&&function(e){Ug(e,"onDisconnectEvents");var t=Ag(e),n=Ay();Ly(e.onDisconnect_,Sv(),(function(r,i){var a=rg(r,i,e.serverSyncTree_,t);Py(n,r,a)}));var r=[];Ly(n,Sv(),(function(t,n){r=r.concat(qm(e.serverSyncTree_,t,n));var i=Kg(e,t);zg(e,i)})),e.onDisconnect_=Ay(),Cg(e.eventQueue_,Sv(),r)}(e)}function Og(e,t,n){var r=new Cv("/.info/"+t),i=ky(n);e.infoData_.updateSnapshot(r,i);var a=qm(e.infoSyncTree_,r,i);Cg(e.eventQueue_,r,a)}function Mg(e){return e.nextWriteId_++}function Fg(e){e.persistentConnection_&&e.persistentConnection_.interrupt(xg)}function Ug(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ap.apply(void 0,[t].concat(r))}function Vg(e,t,n){return Hm(e.serverSyncTree_,t,n)||yy.EMPTY_NODE}function jg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Wg(e,t),sg(t)){var n=Bg(e,t);A(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Vg(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];A(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var l=Lv(t,s.path);a=a.updateChild(l,s.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){Ug(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(zm(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Wg(e,ug(e.transactionQueueTree_,t)),jg(e,e.transactionQueueTree_),Cg(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Yp(a[s])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Mp("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}zg(e,t)}}),o)}(e,dg(t),n)}else cg(t)&&hg(t,(function(t){jg(e,t)}))}function zg(e,t){var n=qg(e,t),r=dg(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,l=t[a],c=Lv(n,l.path),h=!1;if(A(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,u=l.abortReason,i=i.concat(zm(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Ig)h=!0,u="maxretry",i=i.concat(zm(e.serverSyncTree_,l.currentWriteId,!0));else{var f=Vg(e,l.path,o);l.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){_g("transaction failed: Data returned ",d,l.path);var p=ky(d);"object"===typeof d&&null!=d&&re(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=l.currentWriteId,y=Ag(e),m=ig(p,f,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=m,l.currentWriteId=Mg(e),o.splice(o.indexOf(v),1),i=(i=i.concat(jm(e.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally))).concat(zm(e.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(zm(e.serverSyncTree_,l.currentWriteId,!0))}Cg(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);Wg(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Yp(r[l]);jg(e,e.transactionQueueTree_)}(e,Bg(e,n),r),r}function qg(e,t){var n,r=e.transactionQueueTree_;for(n=Tv(t);null!==n&&void 0===sg(r);)r=ug(r,n),n=Tv(t=Iv(t));return r}function Bg(e,t){var n=[];return Hg(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Hg(e,t,n){var r=sg(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);hg(t,(function(t){Hg(e,t,n)}))}function Wg(e,t){var n=sg(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,lg(t,n.length>0?n:void 0)}hg(t,(function(t){Wg(e,t)}))}function Kg(e,t){var n=dg(qg(e,t)),r=ug(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Gg(e,t)})),Gg(e,r),fg(r,(function(t){Gg(e,t)})),n}function Gg(e,t){var n=sg(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(A(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(A(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(zm(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?lg(t,void 0):n.length=a+1,Cg(e.eventQueue_,dg(t),i);for(var u=0;u<r.length;u++)Yp(r[u])}}var Qg=function(e,t){var n=Yg(e),r=n.namespace;"firebase.com"===n.domain&&Op(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Op("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Mp("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new av(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Cv(n.pathString)}},Yg=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=b(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Mp("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},$g="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Xg=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){T(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return I(e,[{key:"key",get:function(){return Pv(this._path)?null:Nv(this._path)}},{key:"ref",get:function(){return new Jg(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Ny(this._queryParams),t=Bp(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Ny(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=fe(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ov(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var Jg=function(e){w(n,e);var t=C(n);function n(e,r){return T(this,n),t.call(this,e,r,new xy,!1)}return I(n,[{key:"parent",get:function(){var e=Rv(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Xg);!function(e){A(!Am,"__referenceConstructor has already been defined"),Am=e}(Jg),function(e){A(!Mm,"__referenceConstructor has already been defined"),Mm=e}(Jg);var Zg="FIREBASE_DATABASE_EMULATOR_HOST",ek={},tk=!1;function nk(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Op("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ap("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Qg(a,i),s=u.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/ma-soi-homemade",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Zg]),l?(o=!0,a="http://".concat(l,"?ns=").concat(s.namespace),s=(u=Qg(a,i)).repoInfo):o=!u.repoInfo.secure;var c=i&&o?new Zp(Zp.OWNER):new Jp(e.name,e.options,t);bg("Invalid Firebase Database URL",u),Pv(u.path)||Op("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=ek[t.name];i||(i={},ek[t.name]=i);var a=i[e.toURLString()];a&&Op("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Ng(e,tk,n,r),i[e.toURLString()]=a,a}(s,e,c,new Xp(e.name,n));return new rk(h,e)}var rk=function(){function e(t,n){T(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return I(e,[{key:"_repo",get:function(){return this._instanceStarted||(Dg(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Jg(this._repo,Sv())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=ek[t];n&&n[e.key]===e||Op("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Fg(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Op("Cannot call "+e+" on a deleted database.")}}]),e}();qv.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},qv.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){kp=e}(it),Ze(new de("database",(function(e,t){var n=t.instanceIdentifier;return nk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ot(mp,gp,e),ot(mp,gp,"esm2017")}();var ik=function(e,t){var n="object"==typeof e?e:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=$e.get(e);if(!t&&e===Qe)return at();if(!t)throw nt.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||"(default)",i=et(n,"firestore").getImmediate({identifier:r});if(!i._initialized){var a=H("firestore");a&&id.apply(void 0,[i].concat(S(a)))}return i}(at({apiKey:"AIzaSyCOfk9C32PRUxTIumr1iNDJ5eaFY2pnOVc",authDomain:"ma-soi-7b80f.firebaseapp.com",databaseURL:"https://ma-soi-7b80f-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"ma-soi-7b80f",storageBucket:"ma-soi-7b80f.appspot.com",messagingSenderId:"678662370688",appId:"1:678662370688:web:9009a5915ffbbeb962bd65",measurementId:"G-4RSYM63XX5"})),ak="user-login",ok=function(){var e=o(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lp(sd(ik,ak));case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(d({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uk=function(){var e=o(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sd(ik,ak),n=Gd(t,Yd("isHost","==",!0)),e.next=4,lp(n);case 4:return r=e.sent,a=[],r.forEach((function(e){a.push(d({id:e.id},e.data()))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sk=function(){var e=o(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ld(ik,ak,t),e.next=3,cp(r,{role:n});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lk=function(){var e=o(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ok();case 2:t=e.sent,n=0;case 4:if(!(n<t.length)){e.next=11;break}return r=ld(ik,ak,t[n].id),e.next=8,hp(r);case 8:n++,e.next=4;break;case 11:window.location.reload();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ck=n(184),hk=function(t){var n=l((0,e.useState)(null),2),r=n[0],a=n[1],u=function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ok(t.dbCollection);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=o(i().mark((function e(n){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==r.trim()){e.next=4;break}return alert("Enter valid message"),e.abrupt("return");case 4:return a={userName:r,createdAt:yp(),isHost:!0,role:null},e.next=7,u();case 7:if(!(o=e.sent).find((function(e){return e.userName===a.userName}))){e.next=11;break}return alert("Tr\xf9ng t\xean r\u1ed3i m\xe1!"),e.abrupt("return");case 11:if(!o.find((function(e){return e.isHost===a.isHost}))){e.next=14;break}return alert("C\xf3 host r\xf9i m\xe1 ui, ch\u1ecdn c\xe1i c\xf2n l\u1ea1i \u0111i!!"),e.abrupt("return");case 14:return e.next=16,fp(sd(t.dbCollection,"user-login"),a).then((function(e){t.onGetUserLogin(d(d({},a),{},{id:e.id})),console.log("sucess")}));case 16:e.sent;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=o(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==r.trim()){e.next=4;break}return alert("Enter valid message"),e.abrupt("return");case 4:return a={userName:r,createdAt:yp(),isHost:!1,role:null},e.next=7,u();case 7:if(!e.sent.find((function(e){return e.userName===a.userName}))){e.next=11;break}return alert("Tr\xf9ng t\xean r\u1ed3i m\xe1!"),e.abrupt("return");case 11:return e.next=13,fp(sd(t.dbCollection,"user-login"),a).then((function(e){t.onGetUserLogin(d(d({},a),{},{id:e.id})),console.log("sucess")}));case 13:e.sent;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,ck.jsxs)("div",{children:[(0,ck.jsx)("h1",{children:"Hello m\u1ea5y \xf4ng b\xe0 gi\xe0!"}),(0,ck.jsx)("img",{style:{width:"300px"},src:p,alt:""}),(0,ck.jsx)("br",{}),(0,ck.jsx)("div",{className:"mb-3",children:(0,ck.jsx)("input",{placeholder:"Nh\u1eadp t\xean \u0111i \xf4ng b\xe0 gi\xe0",type:"email",className:"form-control",onChange:function(e){a(e.target.value)},id:"username"})}),(0,ck.jsx)("br",{}),(0,ck.jsx)("button",{onClick:s,type:"button",disabled:t.host&&t.host.length>0&&!0,className:"btn btn-warning",children:"Tr\u01b0\u1edfng ph\xf2ng"}),(0,ck.jsx)("br",{}),(0,ck.jsx)("button",{onClick:c,type:"button",className:"btn btn-success",children:"V\xe0o game c\xf3 s\u1eb5n"})]})},fk=function(t){var n,r=l((0,e.useState)(!1),2);r[0],r[1];return(0,ck.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,ck.jsx)("h1",{children:"Online"}),(0,ck.jsx)("div",{style:{background:"gray",padding:10,margin:10,minWidth:"200px"},children:t.allUser.map((function(e,t){return(0,ck.jsxs)("div",{children:[(0,ck.jsx)("div",{children:null===e||void 0===e?void 0:e.data.userName},e.data.id),(0,ck.jsx)("hr",{})]})}))}),(0,ck.jsxs)("div",{children:[" T\u1ed5ng : ",null===(n=t.allUser)||void 0===n?void 0:n.length]})]})},dk=[{role:"soi",img:n.p+"static/media/soi.3cb4f7be47206086d11b.jpg"},{role:"bansoi",img:n.p+"static/media/bansoi.331375acd830f46bd8cf.jpg"},{role:"baove",img:n.p+"static/media/baove.d98afc5f3c9362c2c6bc.jpg"},{role:"phuthuy",img:n.p+"static/media/phuthuy.783ecad45357894a05bd.jpg"},{role:"thosan",img:n.p+"static/media/thosan.a57cc5653ffaf4460359.jpg"},{role:"thuongdan",img:n.p+"static/media/thuongdan.7b4a6eb1a12277214f4b.jpg"},{role:"tientri",img:n.p+"static/media/tientri.1ce7329fd6e6f3e90aaf.jpg"}],pk=function(t){var n,r,a,u=l((0,e.useState)(1),2),s=u[0],c=u[1],h=l((0,e.useState)(1),2),f=h[0],d=h[1],p=l((0,e.useState)(1),2),v=p[0],y=p[1],m=l((0,e.useState)(1),2),g=m[0],k=m[1],_=l((0,e.useState)(1),2),b=_[0],w=_[1],E=l((0,e.useState)(1),2),C=E[0],S=E[1],T=l((0,e.useState)(1),2),x=T[0],I=T[1],N=l((0,e.useState)(0),2),D=N[0],R=N[1];(0,e.useEffect)((function(){var e=dp(ld(ik,"user-login",t.userLogin.id?t.userLogin.id:t.allUserLogin.find((function(e){return e.data.userName===t.userLogin.userName})).id),(function(e){t.onGetUserLogin(e.data())}));return function(){return e}}),[]),(0,e.useEffect)((function(){R((function(e){return+s+ +f+ +v+ +g+ +b+ +C+ +x}))}),[s,f]);var A=[];function P(e){var t=e[Math.floor(Math.random()*e.length)];return function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}(A,t)?P(e):(A.push(t),t)}var L=function(){var e=o(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ok();case 2:for(t=e.sent,n=0;n<t.length;n++)r=P(dk),sk(t[n].id,r.role);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ck.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[!(null!==(n=t.userLogin)&&void 0!==n&&n.role)&&(0,ck.jsxs)("div",{children:[(0,ck.jsx)(fk,{allUser:t.allUserLogin}),t.isHost&&(0,ck.jsxs)("div",{children:[(0,ck.jsxs)("div",{children:["T\u1ed5ng role: ",D," "]}),(0,ck.jsx)("hr",{}),(0,ck.jsxs)("div",{children:[(0,ck.jsx)("label",{className:"form-label",children:"Th\u01b0\u1eddng d\xe2n"}),(0,ck.jsxs)("select",{onChange:function(e){c((function(t){return e.target.value}))},className:"form-select","aria-label":"Th\u01b0\u1eddng d\xe2n",children:[(0,ck.jsx)("option",{selected:!0,value:"1",children:"1"}),(0,ck.jsx)("option",{value:"2",children:"2"}),(0,ck.jsx)("option",{value:"3",children:"3"}),(0,ck.jsx)("option",{value:"3",children:"4"})]})]}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"S\xf3i"}),(0,ck.jsxs)("select",{onChange:function(e){d(e.target.value)},className:"form-select","aria-label":"S\xf3i",children:[(0,ck.jsx)("option",{selected:!0,value:"1",children:"1"}),(0,ck.jsx)("option",{value:"2",children:"2"})]}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"B\u1ea3o v\u1ec7"}),(0,ck.jsx)("select",{onChange:function(e){y(e.target.value)},className:"form-select","aria-label":"B\u1ea3o v\u1ec7",children:(0,ck.jsx)("option",{value:"1",children:"1"})}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"B\xe1n s\xf3i"}),(0,ck.jsx)("select",{onChange:function(e){k(e.target.value)},className:"form-select","aria-label":"B\xe1n s\xf3i",children:(0,ck.jsx)("option",{value:"1",children:"1"})}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"Ph\xf9 th\u1ee7y"}),(0,ck.jsx)("select",{onChange:function(e){w(e.target.value)},className:"form-select","aria-label":"Ph\xf9 th\u1ee7y",children:(0,ck.jsx)("option",{value:"1",children:"1"})}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"Th\u1ee3 s\u0103n"}),(0,ck.jsx)("select",{onChange:function(e){S(e.target.value)},className:"form-select","aria-label":"Th\u1ee3 s\u0103n",children:(0,ck.jsx)("option",{value:"1",children:"1"})}),(0,ck.jsx)("br",{}),(0,ck.jsx)("label",{className:"form-label",children:"Ti\xean tri"}),(0,ck.jsx)("select",{onChange:function(e){I(e.target.value)},className:"form-select","aria-label":"Ti\xean tri",children:(0,ck.jsx)("option",{value:"1",children:"1"})}),(0,ck.jsx)("br",{})]})]}),!(null!==(r=t.userLogin)&&void 0!==r&&r.role)&&t.isHost&&(0,ck.jsx)("button",{onClick:L,className:"btn btn-success",children:"V\xe0o thui"}),(null===(a=t.userLogin)||void 0===a?void 0:a.role)&&(0,ck.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,ck.jsx)("h1",{children:"Ch\xfac m\u1eebng b\u1ea1n \u0111\xe3 chuy\u1ec3n sinh th\xe0nh"}),(0,ck.jsx)("hr",{}),(0,ck.jsx)("img",{style:{width:"400px"},src:dk.find((function(e){var n;return e.role===(null===(n=t.userLogin)||void 0===n?void 0:n.role)})).img,alt:""})]})]})},vk=function(){var t=l((0,e.useState)(null),2),n=t[0],r=t[1],a=l((0,e.useState)(null),2),u=a[0],s=a[1],c=l((0,e.useState)(null),2),h=(c[0],c[1],l((0,e.useState)([]),2)),f=h[0],d=h[1],p=l((0,e.useState)(!1),2),v=p[0],y=p[1],m=l((0,e.useState)([]),2),g=(m[0],m[1],function(){var e=o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uk(ik);case 2:t=e.sent,s((function(e){return t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,e.useEffect)((function(){g()}),[]),(0,e.useEffect)((function(){var e=dp(sd(ik,"user-login"),(function(t){return d(t.docs.map((function(e){return{id:e.id,data:e.data()}}))),function(){return e}}))}),[]),(0,e.useEffect)((function(){var e=dp(sd(ik,"actions"),(function(t){return t.docs.map((function(e){return{id:e.id,data:e.data()}})).filter((function(e){return e.actionName="start"})).length>0&&y(!0),function(){return e}}))}),[]);var k=function(e){r((function(t){return e}))};return(0,ck.jsxs)("div",{className:"App",children:[!v&&!n&&(0,ck.jsx)(hk,{dbCollection:ik,onGetUserLogin:k,host:u}),n&&(0,ck.jsx)(pk,{userLogin:n,allUserLogin:f,isHost:n&&n.isHost,onGetUserLogin:k}),(0,ck.jsx)("div",{children:v&&(0,ck.jsx)("div",{children:"asds"})}),(0,ck.jsx)("button",{onClick:lk,children:"Delete"})]})},yk=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,ck.jsx)(vk,{})),yk()}()}();
//# sourceMappingURL=main.a723d869.js.map